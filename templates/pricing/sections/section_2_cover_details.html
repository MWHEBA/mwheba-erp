{% load i18n %}
{% load django_bootstrap5 %}

<!-- ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØºÙ„Ø§Ù -->
<div class="section-card section-hidden" id="section-2">
    <div class="section-header">
        <h4>ğŸ–¨ï¸ ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØºÙ„Ø§Ù</h4>
    </div>
    <div class="section-body">
        <!-- Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ø§Ù…Ø© -->
        <div class="sub-section">
            <h5 class="sub-section-title">Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ø§Ù…Ø©</h5>
            <div class="row field-row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label>{% trans "Ù†ÙˆØ¹ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©" %}</label>
                        <select id="id_order_type" name="order_type" class="form-control">
                            <option value="offset" selected>Ø£ÙˆÙØ³Øª</option>
                            <option value="digital">Ø¯ÙŠØ¬ÙŠØªØ§Ù„</option>
                        </select>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label>{% trans "Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙˆØ¬Ù‡" %}</label>
                        {% comment %}
                        <select id="id_print_sides" name="print_sides" class="form-control">
                            <option value="1" selected>ÙˆØ¬Ù‡</option>
                            <option value="2">ÙˆØ¬Ù‡ÙŠÙ†</option>
                            <option value="3">Ø·Ø¨Ø¹ ÙˆÙ‚Ù„Ø¨</option>
                        </select>
                        {% endcomment %}
                        {% bootstrap_field form.print_sides show_label=False %}
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Ø§Ù„ØªØµÙ…ÙŠÙ… -->
        <div class="sub-section">
            <h5 class="sub-section-title">Ø§Ù„ØªØµÙ…ÙŠÙ…</h5>
            <!-- Ø­Ù‚ÙˆÙ„ Ø£Ù„ÙˆØ§Ù† Ø§Ù„ØªØµÙ…ÙŠÙ… -->
            <div class="row field-row" id="single-side-colors">
                <div class="col-md-6">
                    <div class="form-group">
                        <label>{% trans "Ø¹Ø¯Ø¯ Ø£Ù„ÙˆØ§Ù† Ø§Ù„ØªØµÙ…ÙŠÙ…" %}</label>
                        <input type="number" id="id_colors_design" name="colors_design" class="form-control" min="0" value="{{ form.colors_design.value|default:0 }}">
                    </div>
                </div>
            </div>
            
            <div class="row field-row" id="double-side-colors" style="display: none;">
                <div class="col-md-3">
                    <div class="form-group">
                        <label>{% trans "Ø¹Ø¯Ø¯ Ø£Ù„ÙˆØ§Ù† Ø§Ù„ÙˆØ¬Ù‡" %}</label>
                        {% bootstrap_field form.colors_front show_label=False %}
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="form-group">
                        <label>{% trans "Ø¹Ø¯Ø¯ Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø¸Ù‡Ø±" %}</label>
                        {% bootstrap_field form.colors_back show_label=False %}
                    </div>
                </div>
            </div>
            
            <div class="row field-row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label>{% trans "Ø³Ø¹Ø± Ø§Ù„ØªØµÙ…ÙŠÙ…" %}</label>
                        <input type="number" id="id_design_price" name="design_price" class="form-control" step="0.01" value="{{ form.design_price.value|default:'' }}">
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label>{% trans "Ø§Ù„Ø¹Ø¯Ø¯ / Ø§Ù„Ù…ÙˆÙ†ØªØ§Ø¬" %}</label>
                        <input type="text" id="id_montage_info" class="form-control" readonly>
                        <input type="hidden" id="id_montage_count" name="montage_count" value="1">
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø²Ù†ÙƒØ§Øª (CTP) -->
        <div class="sub-section" id="ctp-fields">
            <h5 class="sub-section-title">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø²Ù†ÙƒØ§Øª (CTP)</h5>
            <div class="row field-row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label>{% trans "Ù…ÙˆØ±Ø¯ Ø§Ù„Ø²Ù†ÙƒØ§Øª" %}</label>
                        <select id="id_ctp_supplier" name="ctp_supplier" class="form-control">
                            <option value="">-- Ø§Ø®ØªØ± Ø§Ù„Ù…ÙˆØ±Ø¯ --</option>
                            {% for supplier in plate_suppliers %}
                            <option value="{{ supplier.id }}">{{ supplier.name }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label>{% trans "Ù…Ù‚Ø§Ø³ Ø§Ù„Ø²Ù†Ùƒ" %}</label>
                        <select id="id_ctp_plate_size" name="ctp_plate_size" class="form-control">
                            <option value="">-- Ø§Ø®ØªØ± Ø§Ù„Ù…Ù‚Ø§Ø³ --</option>
                        </select>
                    </div>
                </div>
            </div>
            
            <div class="row field-row">
                <div class="col-md-4">
                    <div class="form-group">
                        <label>{% trans "Ø¹Ø¯Ø¯ Ø§Ù„Ø²Ù†ÙƒØ§Øª" %}</label>
                        <input type="number" id="id_ctp_plates_count" name="ctp_plates_count" class="form-control" min="1">
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label>{% trans "Ø³Ø¹Ø± Ø§Ù„Ø²Ù†Ùƒ" %}</label>
                        <input type="number" id="id_ctp_plate_price" name="ctp_plate_price" class="form-control" step="0.01" readonly>
                        <small class="form-text text-muted">ÙŠØªÙ… ØªØ­Ø¯ÙŠØ«Ù‡ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹</small>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label>{% trans "ØªÙƒÙ„ÙØ© Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„Ø§Øª" %}</label>
                        <input type="number" id="id_ctp_transportation" name="ctp_transportation" class="form-control" step="0.01" value="0.00">
                    </div>
                </div>
            </div>
            
            <div class="row field-row">
                <div class="col-md-8">
                    <div class="form-group">
                        <label>{% trans "Ù…Ù„Ø§Ø­Ø¸Ø§Øª" %}</label>
                        <textarea id="id_ctp_notes" name="ctp_notes" class="form-control" rows="2"></textarea>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label>{% trans "Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØªÙƒÙ„ÙØ©" %}</label>
                        <input type="number" id="id_ctp_total_cost" class="form-control form-control-lg text-primary font-weight-bold" step="0.01" readonly>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø·Ø¨Ø¹Ø© -->
        <div class="sub-section" id="press-fields">
            <h5 class="sub-section-title">Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø£ÙˆÙØ³Øª</h5>
            <div class="row field-row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label>{% trans "Ø§Ù„Ù…Ø·Ø¨Ø¹Ø©" %}</label>
                        <select id="id_supplier" name="supplier" class="form-control" onchange="loadPressesDirectly(this.value)">
                            <option value="">-- Ø§Ø®ØªØ± Ø§Ù„Ù…Ø·Ø¨Ø¹Ø© --</option>
                            {% for supplier in printing_suppliers %}
                            <option value="{{ supplier.id }}">{{ supplier.name }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label>{% trans "Ù…Ø§ÙƒÙŠÙ†Ø© Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©" %}</label>
                        <select id="press_selector" class="form-control" onchange="updatePressValue(this.value)">
                            <option value="">-- Ø§Ø®ØªØ± Ø§Ù„Ù…Ø§ÙƒÙŠÙ†Ø© --</option>
                        </select>
                        <input type="hidden" id="id_press" name="press" value="">
                    </div>
                </div>
            </div>
            
            <div class="row field-row">
                <div class="col-md-4">
                    <div class="form-group">
                        <label>{% trans "Ø³Ø¹Ø± Ø§Ù„ØªØ±Ø§Ø¬" %}</label>
                        <input type="number" id="id_press_price_per_1000" name="press_price_per_1000" class="form-control" step="0.01" readonly>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label>{% trans "Ø¹Ø¯Ø¯ Ø§Ù„ØªØ±Ø§Ø¬Ø§Øª" %}</label>
                        <input type="number" id="id_press_runs" name="press_runs" class="form-control" min="1" value="1">
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label>{% trans "ØªÙƒÙ„ÙØ© Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„Ø§Øª" %}</label>
                        <input type="number" id="id_press_transportation" name="press_transportation" class="form-control" step="0.01" value="0.00">
                    </div>
                </div>
            </div>
            
            <div class="row field-row">
                <div class="col-md-8">
                    <div class="form-group">
                        <label>{% trans "Ù…Ù„Ø§Ø­Ø¸Ø§Øª" %}</label>
                        <textarea id="id_press_notes" name="press_notes" class="form-control" rows="2"></textarea>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label>{% trans "Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØªÙƒÙ„ÙØ©" %}</label>
                        <input type="number" id="id_press_total_cost" class="form-control form-control-lg text-primary font-weight-bold" step="0.01" readonly>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ÙˆØ±Ù‚ -->
        <div class="sub-section">
            <h5 class="sub-section-title">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ÙˆØ±Ù‚</h5>
            <div class="row field-row">
                <div class="col-md-3">
                    {% bootstrap_field form.paper_type %}
                </div>
                <div class="col-md-3">
                    {% bootstrap_field form.paper_supplier %}
                </div>
                <div class="col-md-3">
                    {% bootstrap_field form.paper_sheet_type %}
                </div>
                <div class="col-md-3">
                    {% bootstrap_field form.paper_weight %}
                </div>
            </div>
            <div class="row field-row">
                <div class="col-md-3">
                    {% bootstrap_field form.paper_origin %}
                </div>
                <div class="col-md-3">
                    <div class="form-group">
                        <label for="id_paper_price">Ø³Ø¹Ø± Ø§Ù„ÙØ±Ø®</label>
                        <input type="number" id="id_paper_price" name="paper_price" class="form-control" step="0.01" readonly>
                        <small class="form-text text-muted">ÙŠØªÙ… ØªØ­Ø¯ÙŠØ«Ù‡ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹</small>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label>{% trans "Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙØ±Ø®" %}</label>
                        <input type="number" id="id_paper_sheets_count" name="paper_sheets_count" class="form-control" min="1">
                        <small id="paper-sheets-info" class="form-text text-muted"></small>
                    </div>
                </div>
            </div>
            <div class="row field-row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label>{% trans "Ø¥Ø¬Ù…Ø§Ù„ÙŠ ØªÙƒÙ„ÙØ© Ø§Ù„ÙˆØ±Ù‚" %}</label>
                        <input type="number" id="id_paper_total_cost" name="paper_total_cost" class="form-control" step="0.01" readonly>
                        <small class="form-text text-muted">Ø§Ù„Ø³Ø¹Ø± Ã— Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙØ±Ø®</small>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Ø®Ø¯Ù…Ø§Øª Ù…Ø§ Ø¨Ø¹Ø¯ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© -->
        <div class="sub-section">
            <h5 class="sub-section-title">Ø®Ø¯Ù…Ø§Øª Ù…Ø§ Ø¨Ø¹Ø¯ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©</h5>
            
            {% include "pricing/partials/finishing_services/coating_service.html" %}
            {% include "pricing/partials/finishing_services/folding_service.html" %}
            {% include "pricing/partials/finishing_services/die_cut_service.html" %}
            {% include "pricing/partials/finishing_services/spot_uv_service.html" %}
            
            {% include "pricing/partials/finishing_services/total_finishing_cost.html" %}
        </div>
        
        <div class="row mt-4">
            <div class="col d-flex justify-content-between">
                <button type="button" class="btn btn-secondary btn-prev-step" id="to-section-1" data-target="section-1">
                    <i class="fas fa-arrow-right ml-2"></i> Ø§Ù„Ø³Ø§Ø¨Ù‚
                </button>
                <button type="button" class="btn btn-primary btn-next-step" id="to-section-3" data-target="section-3">
                    Ø§Ù„ØªØ§Ù„ÙŠ <i class="fas fa-arrow-left mr-2"></i>
                </button>
            </div>
        </div>
    </div>
</div> 