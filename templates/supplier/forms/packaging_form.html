<!-- نموذج خدمات التقفيل -->
<div class="packaging-service-form">
    
    <!-- معلومات الخدمة الأساسية -->
    <div class="card mb-4">
        <div class="card-header bg-primary text-white">
            <h6 class="mb-0">
                <i class="fas fa-info-circle me-2"></i>
                معلومات الخدمة الأساسية
            </h6>
        </div>
        <div class="card-body">
            <div class="row g-3">
                <div class="col-md-6">
                    <div class="form-floating">
                        <input type="text" class="form-control" name="name" id="service-name" 
                               placeholder="اسم الخدمة" required>
                        <label for="service-name">اسم الخدمة *</label>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-floating">
                        <select name="packaging_type" class="form-select" id="packaging-type" required>
                            <option value="">اختر نوع التقفيل</option>
                            {% for choice in form_choices.packaging_types %}
                                <option value="{{ choice.0 }}">{{ choice.1 }}</option>
                            {% endfor %}
                        </select>
                        <label for="packaging-type">نوع التقفيل *</label>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- إعدادات التسعير -->
    <div class="card mb-4">
        <div class="card-header bg-success text-white">
            <h6 class="mb-0">
                <i class="fas fa-dollar-sign me-2"></i>
                إعدادات التسعير
            </h6>
        </div>
        <div class="card-body">
            <div class="row g-3 mb-3">
                <div class="col-md-6">
                    <div class="form-floating">
                        <select name="calculation_method" class="form-select" id="calculation-method" required>
                            <option value="">اختر طريقة الحساب</option>
                            {% for choice in form_choices.calculation_methods %}
                                <option value="{{ choice.0 }}">{{ choice.1 }}</option>
                            {% endfor %}
                        </select>
                        <label for="calculation-method">طريقة الحساب *</label>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-floating">
                        <input type="number" class="form-control" name="price_per_unit" 
                               id="price-per-unit" placeholder="سعر الوحدة" min="0" step="0.01" required>
                        <label for="price-per-unit">سعر الوحدة *</label>
                    </div>
                </div>
            </div>
            
            <div class="row g-3 mb-3">
                <div class="col-md-4">
                    <div class="form-floating">
                        <input type="number" class="form-control" name="setup_time_minutes" 
                               id="setup-time" placeholder="وقت التجهيز" min="0" value="15">
                        <label for="setup-time">وقت التجهيز (دقائق)</label>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-floating">
                        <input type="number" class="form-control" name="turnaround_time_hours" 
                               id="turnaround-time" placeholder="وقت التسليم" min="1" value="4">
                        <label for="turnaround-time">وقت التسليم (ساعات)</label>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-floating">
                        <input type="number" class="form-control" name="max_thickness_mm" 
                               id="max-thickness" placeholder="أقصى سُمك" min="0" step="0.1">
                        <label for="max-thickness">أقصى سُمك (مم)</label>
                    </div>
                </div>
            </div>
            
            <div class="row g-3">
                <div class="col-md-6">
                    <div class="form-floating">
                        <input type="text" class="form-control" name="wire_color_options" 
                               id="wire-colors" placeholder="ألوان السلك">
                        <label for="wire-colors">ألوان السلك المتاحة</label>
                        <small class="text-muted">مثال: أسود، أبيض، فضي، ذهبي</small>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-floating">
                        <input type="text" class="form-control" name="cover_material_options" 
                               id="cover-materials" placeholder="خامات الغلاف">
                        <label for="cover-materials">خامات الغلاف المتاحة</label>
                        <small class="text-muted">مثال: PVC، جلد صناعي، كرتون مقوى</small>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- معلومات إضافية وإعدادات -->
    <div class="card mb-4">
        <div class="card-header bg-info text-white">
            <h6 class="mb-0">
                <i class="fas fa-cog me-2"></i>
                معلومات إضافية وإعدادات
            </h6>
        </div>
        <div class="card-body">
            <div class="row g-3">
                <div class="col-md-8">
                    <div class="form-floating">
                        <textarea class="form-control" name="description" id="description" 
                                  placeholder="وصف الخدمة" style="height: 100px;"></textarea>
                        <label for="description">وصف الخدمة</label>
                    </div>
                </div>
                <div class="col-md-4 d-flex align-items-center justify-content-center">
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" name="is_active" 
                               id="is-active" checked style="transform: scale(1.5);">
                        <label class="form-check-label ms-2" for="is-active">
                            <strong class="text-success">الخدمة نشطة</strong>
                        </label>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

<script>
// تحديث اسم الخدمة تلقائياً
document.getElementById('packaging-type').addEventListener('change', function() {
    const nameField = document.getElementById('service-name');
    if (!nameField.value) {
        const selectedOption = this.options[this.selectedIndex];
        if (selectedOption.value) {
            nameField.value = `خدمة ${selectedOption.text}`;
        }
    }
});

// تحديث الأوقات حسب نوع التقفيل
document.getElementById('packaging-type').addEventListener('change', function() {
    const setupTimeField = document.getElementById('setup-time');
    const turnaroundTimeField = document.getElementById('turnaround-time');
    const packagingType = this.value;
    
    // تحديد الأوقات المناسبة لكل نوع
    const timings = {
        'stapling': { setup: 10, turnaround: 2 },
        'wire_binding': { setup: 20, turnaround: 4 },
        'spiral_binding': { setup: 15, turnaround: 3 },
        'perfect_binding': { setup: 30, turnaround: 8 },
        'saddle_stitch': { setup: 15, turnaround: 3 },
        'lamination': { setup: 20, turnaround: 4 },
        'thermal_binding': { setup: 25, turnaround: 6 },
        'comb_binding': { setup: 15, turnaround: 3 }
    };
    
    if (packagingType && timings[packagingType]) {
        setupTimeField.value = timings[packagingType].setup;
        turnaroundTimeField.value = timings[packagingType].turnaround;
    }
});
</script>
