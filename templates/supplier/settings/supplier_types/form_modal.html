{% load static %}
{% load i18n %}

<!-- Modal Header -->
<div class="modal-header">
  <h5 class="modal-title d-flex align-items-center">
    <div class="modal-icon me-3">
      <i class="fas fa-tags text-primary fa-lg"></i>
    </div>
    <div>
      <span class="fw-bold">{{ title }}</span>
      <br><small class="text-muted">
        {% if supplier_type %}ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ù†ÙˆØ¹ Ø§Ù„Ù…ÙˆØ±Ø¯{% else %}Ø¥Ø¶Ø§ÙØ© Ù†ÙˆØ¹ Ù…ÙˆØ±Ø¯ Ø¬Ø¯ÙŠØ¯{% endif %}
      </small>
    </div>
  </h5>
  <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
</div>

<!-- Modal Body -->
<div class="modal-body">
  <form method="post" id="supplierTypeForm" action="{{ action_url }}" class="needs-validation" novalidate>
    {% csrf_token %}
    
    <div class="row">
      <!-- Ø§Ù„Ø¬Ø§Ù†Ø¨ Ø§Ù„Ø£ÙŠØ³Ø±: Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ -->
      <div class="col-lg-7">
        <div class="form-section">
          <h6 class="section-title">
            <i class="fas fa-info-circle text-primary me-2"></i>Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
          </h6>
          
          <div class="row">
            <div class="col-md-6 mb-3">
              <label for="{{ form.name.id_for_label }}" class="form-label required">
                {{ form.name.label }}
              </label>
              {{ form.name }}
              {% if form.name.errors %}
                <div class="invalid-feedback d-block">{{ form.name.errors.0 }}</div>
              {% endif %}
              <div class="form-text">Ø§Ø³Ù… Ø§Ù„Ù†ÙˆØ¹ ÙƒÙ…Ø§ Ø³ÙŠØ¸Ù‡Ø± ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…</div>
            </div>
            
            <div class="col-md-6 mb-3">
              <label for="{{ form.code.id_for_label }}" class="form-label required">
                {{ form.code.label }}
              </label>
              {{ form.code }}
              {% if form.code.errors %}
                <div class="invalid-feedback d-block">{{ form.code.errors.0 }}</div>
              {% endif %}
              <div class="form-text">Ø±Ù…Ø² ÙØ±ÙŠØ¯ Ø¨Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©</div>
            </div>
          </div>

          <div class="mb-3">
            <label for="{{ form.description.id_for_label }}" class="form-label">
              {{ form.description.label }}
            </label>
            {{ form.description }}
            {% if form.description.errors %}
              <div class="invalid-feedback d-block">{{ form.description.errors.0 }}</div>
            {% endif %}
            <div class="form-text">ÙˆØµÙ Ù…Ø®ØªØµØ± Ù„Ù„Ù†ÙˆØ¹ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</div>
          </div>

          <div class="row">
            <div class="col-md-6 mb-3">
              <label for="{{ form.display_order.id_for_label }}" class="form-label">
                {{ form.display_order.label }}
              </label>
              {{ form.display_order }}
              {% if form.display_order.errors %}
                <div class="invalid-feedback d-block">{{ form.display_order.errors.0 }}</div>
              {% endif %}
              <div class="form-text">ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¹Ø±Ø¶ ÙÙŠ Ø§Ù„Ù‚ÙˆØ§Ø¦Ù…</div>
            </div>
            
            <div class="col-md-6 mb-3">
              <div class="form-check form-switch mt-4">
                {{ form.is_active }}
                <label class="form-check-label" for="{{ form.is_active.id_for_label }}">
                  {{ form.is_active.label }}
                </label>
                {% if form.is_active.errors %}
                  <div class="invalid-feedback d-block">{{ form.is_active.errors.0 }}</div>
                {% endif %}
              </div>
            </div>
          </div>
        </div>

        <div class="form-section">
          <h6 class="section-title">
            <i class="fas fa-palette text-primary me-2"></i>Ø§Ù„Ù…Ø¸Ù‡Ø± Ø§Ù„Ø¨ØµØ±ÙŠ
          </h6>
          
          <div class="row">
            <div class="col-md-6 mb-3">
              <label for="{{ form.icon.id_for_label }}" class="form-label">
                {{ form.icon.label }}
              </label>
              <div class="icon-field-wrapper">
                <select name="icon" class="form-select" id="{{ form.icon.id_for_label }}" required>
                  <option value="">Ø§Ø®ØªØ± Ø£ÙŠÙ‚ÙˆÙ†Ø©</option>
                  <option value="fas fa-truck" {% if form.icon.value == 'fas fa-truck' %}selected{% endif %}>ğŸšš Ø´Ø§Ø­Ù†Ø©</option>
                  <option value="fas fa-print" {% if form.icon.value == 'fas fa-print' %}selected{% endif %}>ğŸ–¨ï¸ Ø·Ø§Ø¨Ø¹Ø©</option>
                  <option value="fas fa-file-alt" {% if form.icon.value == 'fas fa-file-alt' %}selected{% endif %}>ğŸ“„ ÙˆØ±Ù‚</option>
                  <option value="fas fa-desktop" {% if form.icon.value == 'fas fa-desktop' %}selected{% endif %}>ğŸ–¥ï¸ ÙƒÙ…Ø¨ÙŠÙˆØªØ±</option>
                  <option value="fas fa-cut" {% if form.icon.value == 'fas fa-cut' %}selected{% endif %}>âœ‚ï¸ Ù‚Øµ</option>
                  <option value="fas fa-layer-group" {% if form.icon.value == 'fas fa-layer-group' %}selected{% endif %}>ğŸ“š Ø·Ø¨Ù‚Ø§Øª</option>
                  <option value="fas fa-box" {% if form.icon.value == 'fas fa-box' %}selected{% endif %}>ğŸ“¦ ØµÙ†Ø¯ÙˆÙ‚</option>
                  <option value="fas fa-paint-brush" {% if form.icon.value == 'fas fa-paint-brush' %}selected{% endif %}>ğŸ¨ ÙØ±Ø´Ø§Ø©</option>
                  <option value="fas fa-bullhorn" {% if form.icon.value == 'fas fa-bullhorn' %}selected{% endif %}>ğŸ“¢ Ù…ÙƒØ¨Ø± ØµÙˆØª</option>
                  <option value="fas fa-bolt" {% if form.icon.value == 'fas fa-laser-pointer' %}selected{% endif %}>ğŸ”´ Ù„ÙŠØ²Ø±</option>
                  <option value="fas fa-gift" {% if form.icon.value == 'fas fa-gift' %}selected{% endif %}>ğŸ Ù‡Ø¯ÙŠØ©</option>
                  <option value="fas fa-ellipsis-h" {% if form.icon.value == 'fas fa-ellipsis-h' %}selected{% endif %}>â‹¯ Ø£Ø®Ø±Ù‰</option>
                  <option value="fas fa-cog" {% if form.icon.value == 'fas fa-cog' %}selected{% endif %}>âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</option>
                  <option value="fas fa-tools" {% if form.icon.value == 'fas fa-tools' %}selected{% endif %}>ğŸ”§ Ø£Ø¯ÙˆØ§Øª</option>
                  <option value="fas fa-industry" {% if form.icon.value == 'fas fa-industry' %}selected{% endif %}>ğŸ­ ØµÙ†Ø§Ø¹Ø©</option>
                  <option value="fas fa-palette" {% if form.icon.value == 'fas fa-palette' %}selected{% endif %}>ğŸ¨ Ø£Ù„ÙˆØ§Ù†</option>
                  <option value="fas fa-camera" {% if form.icon.value == 'fas fa-camera' %}selected{% endif %}>ğŸ“· ÙƒØ§Ù…ÙŠØ±Ø§</option>
                  <option value="fas fa-scissors" {% if form.icon.value == 'fas fa-scissors' %}selected{% endif %}>âœ‚ï¸ Ù…Ù‚Øµ</option>
                  <option value="fas fa-hammer" {% if form.icon.value == 'fas fa-hammer' %}selected{% endif %}>ğŸ”¨ Ù…Ø·Ø±Ù‚Ø©</option>
                  <option value="fas fa-wrench" {% if form.icon.value == 'fas fa-wrench' %}selected{% endif %}>ğŸ”§ Ù…ÙØªØ§Ø­</option>
                </select>
                <div class="selected-icon-preview" id="selectedIconPreview">
                  <i class="fas fa-truck"></i>
                </div>
              </div>
              {% if form.icon.errors %}
                <div class="invalid-feedback d-block">{{ form.icon.errors.0 }}</div>
              {% endif %}
              
              <div class="icon-suggestions mt-2">
                <small class="text-muted d-block mb-2">Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø´Ø§Ø¦Ø¹Ø©:</small>
                <div class="d-flex flex-wrap gap-1">
                  <button type="button" class="btn btn-outline-secondary btn-sm icon-btn" data-icon="fas fa-truck" title="Ø´Ø§Ø­Ù†Ø©">
                    <i class="fas fa-truck"></i>
                  </button>
                  <button type="button" class="btn btn-outline-secondary btn-sm icon-btn" data-icon="fas fa-print" title="Ø·Ø¨Ø§Ø¹Ø©">
                    <i class="fas fa-print"></i>
                  </button>
                  <button type="button" class="btn btn-outline-secondary btn-sm icon-btn" data-icon="fas fa-file-alt" title="Ù…Ù„Ù">
                    <i class="fas fa-file-alt"></i>
                  </button>
                  <button type="button" class="btn btn-outline-secondary btn-sm icon-btn" data-icon="fas fa-cut" title="Ù‚Ø·Ø¹">
                    <i class="fas fa-cut"></i>
                  </button>
                  <button type="button" class="btn btn-outline-secondary btn-sm icon-btn" data-icon="fas fa-box" title="ØµÙ†Ø¯ÙˆÙ‚">
                    <i class="fas fa-box"></i>
                  </button>
                  <button type="button" class="btn btn-outline-secondary btn-sm icon-btn" data-icon="fas fa-gift" title="Ù‡Ø¯ÙŠØ©">
                    <i class="fas fa-gift"></i>
                  </button>
                  <button type="button" class="btn btn-outline-secondary btn-sm icon-btn" data-icon="fas fa-industry" title="Ù…ØµÙ†Ø¹">
                    <i class="fas fa-industry"></i>
                  </button>
                  <button type="button" class="btn btn-outline-secondary btn-sm icon-btn" data-icon="fas fa-tools" title="Ø£Ø¯ÙˆØ§Øª">
                    <i class="fas fa-tools"></i>
                  </button>
                  <button type="button" class="btn btn-outline-secondary btn-sm icon-btn" data-icon="fas fa-cogs" title="Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª">
                    <i class="fas fa-cogs"></i>
                  </button>
                  <button type="button" class="btn btn-outline-secondary btn-sm icon-btn" data-icon="fas fa-palette" title="Ø£Ù„ÙˆØ§Ù†">
                    <i class="fas fa-palette"></i>
                  </button>
                </div>
              </div>
            </div>
            
            <div class="col-md-6 mb-3">
              <label for="{{ form.color.id_for_label }}" class="form-label">
                {{ form.color.label }}
              </label>
              <div class="color-input-wrapper">
                {{ form.color }}
                <div class="color-preview" id="colorPreview"></div>
              </div>
              {% if form.color.errors %}
                <div class="invalid-feedback d-block">{{ form.color.errors.0 }}</div>
              {% endif %}
              
              <div class="color-suggestions mt-2">
                <small class="text-muted d-block mb-2">Ø£Ù„ÙˆØ§Ù† Ø´Ø§Ø¦Ø¹Ø©:</small>
                <div class="d-flex flex-wrap gap-1">
                  <button type="button" class="color-btn" data-color="#007bff" style="background-color: #007bff;" title="Ø£Ø²Ø±Ù‚"></button>
                  <button type="button" class="color-btn" data-color="#28a745" style="background-color: #28a745;" title="Ø£Ø®Ø¶Ø±"></button>
                  <button type="button" class="color-btn" data-color="#dc3545" style="background-color: #dc3545;" title="Ø£Ø­Ù…Ø±"></button>
                  <button type="button" class="color-btn" data-color="#ffc107" style="background-color: #ffc107;" title="Ø£ØµÙØ±"></button>
                  <button type="button" class="color-btn" data-color="#17a2b8" style="background-color: #17a2b8;" title="ÙÙŠØ±ÙˆØ²ÙŠ"></button>
                  <button type="button" class="color-btn" data-color="#6f42c1" style="background-color: #6f42c1;" title="Ø¨Ù†ÙØ³Ø¬ÙŠ"></button>
                  <button type="button" class="color-btn" data-color="#fd7e14" style="background-color: #fd7e14;" title="Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ"></button>
                  <button type="button" class="color-btn" data-color="#20c997" style="background-color: #20c997;" title="Ø£Ø®Ø¶Ø± ÙØ§ØªØ­"></button>
                  <button type="button" class="color-btn" data-color="#e83e8c" style="background-color: #e83e8c;" title="ÙˆØ±Ø¯ÙŠ"></button>
                  <button type="button" class="color-btn" data-color="#6c757d" style="background-color: #6c757d;" title="Ø±Ù…Ø§Ø¯ÙŠ"></button>
                  <button type="button" class="color-btn" data-color="#343a40" style="background-color: #343a40;" title="Ø£Ø³ÙˆØ¯"></button>
                  <button type="button" class="color-btn" data-color="#795548" style="background-color: #795548;" title="Ø¨Ù†ÙŠ"></button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Ø§Ù„Ø¬Ø§Ù†Ø¨ Ø§Ù„Ø£ÙŠÙ…Ù†: Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© -->
      <div class="col-lg-5">
        <div class="preview-section">
          <h6 class="section-title">
            <i class="fas fa-eye text-primary me-2"></i>Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø©
          </h6>
          
          <div class="preview-container">
            <!-- Ù…Ø¹Ø§ÙŠÙ†Ø© ÙÙŠ Ø§Ù„Ø¬Ø¯ÙˆÙ„ -->
            <div class="preview-item">
              <label class="preview-label">ÙÙŠ Ø§Ù„Ø¬Ø¯ÙˆÙ„:</label>
              <div class="table-preview">
                <div class="d-flex align-items-center">
                  <div class="type-icon-small" id="previewIconSmall">
                    <i class="fas fa-truck" id="previewIconClass"></i>
                  </div>
                  <div>
                    <strong id="previewName">Ø§Ø³Ù… Ø§Ù„Ù†ÙˆØ¹</strong>
                    <br><small class="text-muted" id="previewSupplierCount">0 Ù…ÙˆØ±Ø¯</small>
                  </div>
                </div>
              </div>
            </div>

            <!-- Ù…Ø¹Ø§ÙŠÙ†Ø© ÙƒØ¨Ø·Ø§Ù‚Ø© -->
            <div class="preview-item">
              <label class="preview-label">ÙƒØ¨Ø·Ø§Ù‚Ø©:</label>
              <div class="card-preview">
                <div class="type-card">
                  <div class="type-icon-large" id="previewIconLarge">
                    <i class="fas fa-truck" id="previewIconClassLarge"></i>
                  </div>
                  <div class="type-details">
                    <h6 id="previewNameLarge">Ø§Ø³Ù… Ø§Ù„Ù†ÙˆØ¹</h6>
                    <code class="type-code" id="previewCode">code</code>
                    <p class="type-description" id="previewDescription">ÙˆØµÙ Ø§Ù„Ù†ÙˆØ¹</p>
                  </div>
                </div>
              </div>
            </div>

            <!-- Ù…Ø¹Ø§ÙŠÙ†Ø© ÙƒØ´Ø§Ø±Ø© -->
            <div class="preview-item">
              <label class="preview-label">ÙƒØ´Ø§Ø±Ø©:</label>
              <div class="badge-preview">
                <span class="type-badge" id="previewBadge">
                  <i class="fas fa-truck"></i>
                  <span>Ø§Ø³Ù… Ø§Ù„Ù†ÙˆØ¹</span>
                </span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </form>
</div>

<!-- Modal Footer -->
<div class="modal-footer">
  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
    <i class="fas fa-times me-2"></i>Ø¥Ù„ØºØ§Ø¡
  </button>
  <button type="submit" form="supplierTypeForm" class="btn btn-primary" id="submitBtn">
    <i class="fas fa-save me-2"></i>
    {% if supplier_type %}ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†ÙˆØ¹{% else %}Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†ÙˆØ¹{% endif %}
  </button>
</div>

<style>
/* Modal Styling */
.modal-dialog {
  max-width: 900px;
}

.modal-header {
  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
  border-bottom: 1px solid #dee2e6;
}

.modal-title {
  font-size: 1.1rem;
}

/* Form Sections */
.form-section {
  margin-bottom: 2rem;
  padding-bottom: 1.5rem;
  border-bottom: 1px solid #f0f0f0;
}

.form-section:last-child {
  border-bottom: none;
  margin-bottom: 0;
}

.section-title {
  font-size: 1rem;
  font-weight: 600;
  margin-bottom: 1rem;
  color: #495057;
}

.form-label.required::after {
  content: " *";
  color: #dc3545;
}

/* Icon Field */
.icon-field-wrapper {
  display: flex;
  align-items: center;
  gap: 10px;
}

.icon-field-wrapper select {
  flex: 1;
  min-width: 0;
}

.selected-icon-preview {
  width: 38px;
  height: 38px;
  border-radius: 6px;
  border: 2px solid #dee2e6;
  background-color: #f8f9fa;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.2rem;
  color: #495057;
  transition: all 0.3s ease;
  flex-shrink: 0;
}

/* ØªØ­Ø³ÙŠÙ† Ø¹Ø±Ø¶ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†Ø³Ø¯Ù„Ø© Ù„Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª */
select.form-select option {
  padding: 8px 12px;
}

/* Color Input */
.color-input-wrapper {
  display: flex;
  align-items: center;
  gap: 10px;
}

.color-preview {
  width: 38px;
  height: 38px;
  border-radius: 6px;
  border: 2px solid #dee2e6;
  background-color: #007bff;
  transition: all 0.3s ease;
}

.color-btn {
  width: 28px;
  height: 28px;
  border-radius: 6px;
  border: 2px solid #dee2e6;
  cursor: pointer;
  transition: all 0.2s ease;
  position: relative;
}

.color-btn:hover {
  transform: scale(1.1);
  border-color: #007bff;
  box-shadow: 0 2px 8px rgba(0, 123, 255, 0.3);
}

.color-btn.selected {
  border-color: #007bff;
  box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);
}

.color-btn.selected::after {
  content: 'âœ“';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  color: white;
  font-size: 12px;
  font-weight: bold;
  text-shadow: 0 0 2px rgba(0, 0, 0, 0.5);
}

.icon-btn {
  width: 36px;
  height: 36px;
  padding: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
  border-radius: 6px;
}

.icon-btn:hover {
  background-color: #007bff;
  color: white;
  border-color: #007bff;
  transform: scale(1.05);
}

.icon-btn.selected {
  background-color: #007bff;
  color: white;
  border-color: #007bff;
}

/* Preview Section */
.preview-section {
  background: #f8f9fa;
  border-radius: 8px;
  padding: 1.5rem;
  height: fit-content;
  position: sticky;
  top: 20px;
}

.preview-container {
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
}

.preview-item {
  background: white;
  border-radius: 6px;
  padding: 1rem;
  border: 1px solid #e9ecef;
}

.preview-label {
  font-size: 0.875rem;
  font-weight: 600;
  color: #6c757d;
  display: block;
  margin-bottom: 0.5rem;
}

/* Table Preview */
.table-preview {
  padding: 0.5rem;
  background: #fff;
  border-radius: 4px;
}

.type-icon-small {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background-color: #007bff;
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.875rem;
  margin-left: 0.75rem;
  transition: all 0.3s ease;
}

/* Card Preview */
.card-preview {
  display: flex;
  justify-content: center;
}

.type-card {
  text-align: center;
  padding: 1rem;
}

.type-icon-large {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  background-color: #007bff;
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.5rem;
  margin: 0 auto 0.75rem;
  transition: all 0.3s ease;
}

.type-details h6 {
  margin-bottom: 0.25rem;
  font-size: 1rem;
  font-weight: 600;
}

.type-code {
  font-size: 0.8rem;
  background: #e9ecef;
  padding: 0.2rem 0.4rem;
  border-radius: 3px;
  display: inline-block;
  margin-bottom: 0.5rem;
}

.type-description {
  font-size: 0.85rem;
  color: #6c757d;
  margin: 0;
}

/* Badge Preview */
.badge-preview {
  text-align: center;
}

.type-badge {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 1rem;
  background-color: #007bff;
  color: white;
  border-radius: 20px;
  font-size: 0.875rem;
  font-weight: 500;
  transition: all 0.3s ease;
}

/* Responsive */
@media (max-width: 991.98px) {
  .modal-dialog {
    max-width: 95%;
  }
  
  .preview-section {
    position: static;
    margin-top: 2rem;
  }
}

/* Form Controls */
.form-control:focus {
  border-color: #007bff;
  box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
}

.form-check-input:checked {
  background-color: #007bff;
  border-color: #007bff;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ - Ø­Ù„ Ø¬Ø°Ø±ÙŠ
    const form = document.getElementById('supplierTypeForm');
    const nameField = document.getElementById('{{ form.name.id_for_label }}');
    const codeField = document.getElementById('{{ form.code.id_for_label }}');
    const descField = document.getElementById('{{ form.description.id_for_label }}');
    
    // Ø­Ù„ Ø¬Ø°Ø±ÙŠ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø­Ù‚Ù„ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø©
    const iconField = document.querySelector('select[name="icon"]') || document.getElementById('{{ form.icon.id_for_label }}');
    const colorField = document.getElementById('{{ form.color.id_for_label }}');
    
    console.log('ğŸ” ÙØ­Øµ Ø§Ù„Ø­Ù‚ÙˆÙ„:');
    console.log('- nameField:', nameField ? 'âœ…' : 'âŒ');
    console.log('- iconField:', iconField ? 'âœ…' : 'âŒ', iconField);
    console.log('- colorField:', colorField ? 'âœ…' : 'âŒ');
    
    if (iconField) {
        console.log('- Ù‚ÙŠÙ…Ø© Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©:', iconField.value);
        console.log('- Ø¹Ø¯Ø¯ Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø©:', iconField.options.length);
    }
    
    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø§Ù„Ù‚ÙŠÙ…
    if (nameField) nameField.addEventListener('input', updatePreview);
    if (codeField) codeField.addEventListener('input', updatePreview);
    if (descField) descField.addEventListener('input', updatePreview);
    if (iconField) {
        console.log('âœ… Ø­Ù‚Ù„ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø¬Ø§Ù‡Ø² Ù…Ø¹', iconField.options.length, 'Ø®ÙŠØ§Ø±Ø§Øª');
        
        iconField.addEventListener('change', function() {
            console.log('ğŸ”„ ØªÙ… ØªØºÙŠÙŠØ± Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø¥Ù„Ù‰:', this.value);
            // ØªØ­Ø¯ÙŠØ« ÙÙˆØ±ÙŠ Ù…Ø¹ ØªØ£Ø®ÙŠØ± Ù‚ØµÙŠØ± Ù„Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„ØªØ­Ø¯ÙŠØ«
            setTimeout(() => {
                updatePreview();
                updateSelectedButtons();
            }, 10);
        });
    }
    
    // Ø¥Ø¶Ø§ÙØ© listener Ø¥Ø¶Ø§ÙÙŠ Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ select elements Ù„Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª
    document.querySelectorAll('select[name="icon"]').forEach(select => {
        select.addEventListener('change', function() {
            console.log('ğŸ”„ ØªØºÙŠÙŠØ± Ù…Ø¨Ø§Ø´Ø± ÙÙŠ select[name="icon"]:', this.value);
            console.log('ğŸ”„ selectedIndex:', this.selectedIndex);
            console.log('ğŸ”„ Ø§Ù„Ø®ÙŠØ§Ø± Ø§Ù„Ù…Ø­Ø¯Ø¯:', this.options[this.selectedIndex]?.text);
            
            // ØªØ­Ø¯ÙŠØ« ÙÙˆØ±ÙŠ Ù…Ø¹ Ø¥Ø¬Ø¨Ø§Ø±
            updatePreview();
            updateSelectedButtons();
            
            // ØªØ­Ø¯ÙŠØ« Ø¥Ø¶Ø§ÙÙŠ Ø¨Ø¹Ø¯ ØªØ£Ø®ÙŠØ± Ù‚ØµÙŠØ±
            setTimeout(() => {
                console.log('ğŸ”„ ØªØ­Ø¯ÙŠØ« Ø¥Ø¶Ø§ÙÙŠ Ø¨Ø¹Ø¯ Ø§Ù„ØªØ£Ø®ÙŠØ±');
                updatePreview();
            }, 50);
        });
        
        // Ø¥Ø¶Ø§ÙØ© listener Ø¹Ù„Ù‰ input Ø£ÙŠØ¶Ø§Ù‹
        select.addEventListener('input', function() {
            console.log('ğŸ”„ input event ÙÙŠ select[name="icon"]:', this.value);
            updatePreview();
        });
    });
    if (colorField) {
        colorField.addEventListener('input', function() {
            updatePreview();
            updateSelectedButtons();
        });
    }
    
    // Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª
    document.querySelectorAll('.icon-btn').forEach(btn => {
        btn.addEventListener('click', function(e) {
            e.preventDefault();
            const icon = this.dataset.icon;
            console.log('ğŸ–±ï¸ ØªÙ… Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø©:', icon);
            
            // ØªØ­Ø¯ÙŠØ« Ø¬Ù…ÙŠØ¹ select elements Ù„Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª
            const iconSelects = document.querySelectorAll('select[name="icon"]');
            iconSelects.forEach(select => {
                select.value = icon;
                console.log('âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« select:', select, 'Ø¨Ø§Ù„Ù‚ÙŠÙ…Ø©:', icon);
            });
            
            // ØªØ­Ø¯ÙŠØ« iconField Ø¥Ø°Ø§ ÙˆÙØ¬Ø¯
            if (iconField) {
                iconField.value = icon;
                console.log('âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« iconField Ø¨Ø§Ù„Ù‚ÙŠÙ…Ø©:', icon);
            }
            
            // Ø¥Ø²Ø§Ù„Ø© selected Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø²Ø±Ø§Ø±
            document.querySelectorAll('.icon-btn').forEach(b => b.classList.remove('selected'));
            // Ø¥Ø¶Ø§ÙØ© selected Ù„Ù„Ø²Ø± Ø§Ù„Ù…Ø®ØªØ§Ø±
            this.classList.add('selected');
            
            // ØªØ­Ø¯ÙŠØ« ÙÙˆØ±ÙŠ
            setTimeout(() => {
                updatePreview();
                updateSelectedButtons();
            }, 10);
        });
    });
    
    // Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø£Ù„ÙˆØ§Ù†
    document.querySelectorAll('.color-btn').forEach(btn => {
        btn.addEventListener('click', function(e) {
            e.preventDefault();
            const color = this.dataset.color;
            if (colorField) {
                // Ø¥Ø²Ø§Ù„Ø© selected Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø²Ø±Ø§Ø±
                document.querySelectorAll('.color-btn').forEach(b => b.classList.remove('selected'));
                // Ø¥Ø¶Ø§ÙØ© selected Ù„Ù„Ø²Ø± Ø§Ù„Ù…Ø®ØªØ§Ø±
                this.classList.add('selected');
                
                colorField.value = color;
                updatePreview();
            }
        });
    });
    
    // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
    form.addEventListener('submit', function(e) {
        e.preventDefault();
        submitForm();
    });
    
    function updatePreview() {
        // Ø­Ù„ Ø¬Ø°Ø±ÙŠ - Ø¬Ù„Ø¨ Ø§Ù„Ù‚ÙŠÙ… Ù…Ø¨Ø§Ø´Ø±Ø©
        const name = nameField?.value || 'Ø§Ø³Ù… Ø§Ù„Ù†ÙˆØ¹';
        const code = codeField?.value || 'code';
        const description = descField?.value || 'ÙˆØµÙ Ø§Ù„Ù†ÙˆØ¹';
        
        // Ø­Ù„ Ø¬Ø°Ø±ÙŠ Ù†Ù‡Ø§Ø¦ÙŠ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø©
        let icon = 'fas fa-truck'; // Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
        
        console.log('ğŸ” Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©...');
        
        // Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ù…Ø¨Ø§Ø´Ø± ÙÙŠ DOM Ø¹Ù† select Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø©
        const iconSelect = document.querySelector('select[name="icon"]');
        if (iconSelect) {
            console.log('âœ… ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ select[name="icon"]');
            console.log('- Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©:', iconSelect.value);
            console.log('- selectedIndex:', iconSelect.selectedIndex);
            console.log('- Ø§Ù„Ø®ÙŠØ§Ø± Ø§Ù„Ù…Ø­Ø¯Ø¯:', iconSelect.options[iconSelect.selectedIndex]?.text);
            
            if (iconSelect.value && iconSelect.value !== '') {
                icon = iconSelect.value;
                console.log('ğŸ¯ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© Ù…Ù† select Ù…Ø¨Ø§Ø´Ø±Ø©:', icon);
            } else {
                console.log('âš ï¸ select Ù…ÙˆØ¬ÙˆØ¯ Ù„ÙƒÙ† Ø§Ù„Ù‚ÙŠÙ…Ø© ÙØ§Ø±ØºØ©');
                // Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù‚ÙŠÙ…Ø© Ù…Ù† Ø§Ù„Ø®ÙŠØ§Ø± Ø§Ù„Ù…Ø­Ø¯Ø¯
                const selectedOption = iconSelect.options[iconSelect.selectedIndex];
                if (selectedOption && selectedOption.value) {
                    icon = selectedOption.value;
                    console.log('ğŸ¯ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© Ù…Ù† selectedOption:', icon);
                }
            }
        } else {
            console.log('âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ select[name="icon"]');
        }
        
        // Ù…Ø­Ø§ÙˆÙ„Ø© Ø¥Ø¶Ø§ÙÙŠØ© Ù…Ù† iconField
        if (iconField && iconField.value && iconField.value !== '') {
            icon = iconField.value;
            console.log('ğŸ¯ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© Ù…Ù† iconField:', icon);
        }
        
        console.log('ğŸ”§ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©:', icon);
        
        const color = colorField?.value || '#007bff';
        
        console.log('ğŸ”„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© - Ø­Ù„ Ø¬Ø°Ø±ÙŠ:', { name, icon, color });
        
        // 1. selectedIconPreview - Ø¨Ø¬Ø§Ù†Ø¨ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
        const selectedIconPreview = document.getElementById('selectedIconPreview');
        if (selectedIconPreview) {
            const iconElement = selectedIconPreview.querySelector('i');
            if (iconElement) {
                iconElement.className = icon;
                console.log('âœ… selectedIconPreview:', icon);
            } else {
                console.warn('âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¹Ù†ØµØ± i Ø¯Ø§Ø®Ù„ selectedIconPreview');
            }
        } else {
            console.warn('âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ selectedIconPreview');
        }
        
        // 2. previewIconSmall - ÙÙŠ Ø§Ù„Ø¬Ø¯ÙˆÙ„
        const iconSmall = document.getElementById('previewIconSmall');
        const iconClass = document.getElementById('previewIconClass');
        if (iconSmall && iconClass) {
            iconSmall.style.backgroundColor = color;
            iconClass.className = icon;
            console.log('âœ… previewIconSmall:', icon, color);
        } else {
            console.warn('âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ previewIconSmall Ø£Ùˆ previewIconClass');
        }
        
        // 3. previewIconClassLarge - ÙÙŠ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„ÙƒØ¨ÙŠØ±Ø©
        const iconLarge = document.getElementById('previewIconLarge');
        const iconClassLarge = document.getElementById('previewIconClassLarge');
        if (iconLarge && iconClassLarge) {
            iconLarge.style.backgroundColor = color;
            iconClassLarge.className = icon;
            console.log('âœ… previewIconClassLarge:', icon, color);
        } else {
            console.warn('âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ previewIconLarge Ø£Ùˆ previewIconClassLarge');
        }
        
        // 4. previewBadge - Ø§Ù„Ø´Ø§Ø±Ø©
        const badge = document.getElementById('previewBadge');
        if (badge) {
            badge.style.backgroundColor = color;
            const badgeIcon = badge.querySelector('i');
            const badgeText = badge.querySelector('span');
            if (badgeIcon) {
                badgeIcon.className = icon;
                console.log('âœ… badge icon:', icon);
            }
            if (badgeText) badgeText.textContent = name;
        } else {
            console.warn('âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ previewBadge');
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†ØµÙˆØµ
        const previewName = document.getElementById('previewName');
        if (previewName) previewName.textContent = name;
        
        const previewNameLarge = document.getElementById('previewNameLarge');
        if (previewNameLarge) previewNameLarge.textContent = name;
        
        const previewCode = document.getElementById('previewCode');
        if (previewCode) previewCode.textContent = code;
        
        const previewDescription = document.getElementById('previewDescription');
        if (previewDescription) previewDescription.textContent = description;
        
        // ØªØ­Ø¯ÙŠØ« Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ù„ÙˆÙ†
        const colorPreview = document.getElementById('colorPreview');
        if (colorPreview) {
            colorPreview.style.backgroundColor = color;
            console.log('âœ… colorPreview:', color);
        }
    }
    
    function submitForm() {
        const submitBtn = document.getElementById('submitBtn');
        const originalText = submitBtn.innerHTML;
        
        // Ø¥Ø²Ø§Ù„Ø© Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø®Ø·Ø£ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©
        document.querySelectorAll('.is-invalid').forEach(el => {
            el.classList.remove('is-invalid');
        });
        
        submitBtn.disabled = true;
        submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸...';
        
        const formData = new FormData(form);
        
        fetch(form.action, {
            method: 'POST',
            body: formData,
            headers: {
                'X-Requested-With': 'XMLHttpRequest'
            }
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                showAlert(data.message, 'success');
                const modal = bootstrap.Modal.getInstance(document.getElementById('typeModal'));
                if (modal) modal.hide();
                setTimeout(() => window.location.reload(), 1000);
            } else {
                if (data.errors) {
                    // Ø¥Ø¸Ù‡Ø§Ø± Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
                    Object.keys(data.errors).forEach(fieldName => {
                        const field = document.getElementById(`id_${fieldName}`);
                        if (field) {
                            field.classList.add('is-invalid');
                            let errorDiv = field.parentNode.querySelector('.invalid-feedback');
                            if (!errorDiv) {
                                errorDiv = document.createElement('div');
                                errorDiv.className = 'invalid-feedback d-block';
                                field.parentNode.appendChild(errorDiv);
                            }
                            errorDiv.textContent = data.errors[fieldName][0];
                        }
                    });
                }
                showAlert(data.message || 'ÙŠØ±Ø¬Ù‰ ØªØµØ­ÙŠØ­ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø£Ø¯Ù†Ø§Ù‡', 'danger');
            }
        })
        .catch(error => {
            console.error('Error:', error);
            showAlert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„', 'danger');
        })
        .finally(() => {
            submitBtn.disabled = false;
            submitBtn.innerHTML = originalText;
        });
    }
    
    function showAlert(message, type) {
        const alertDiv = document.createElement('div');
        alertDiv.className = `alert alert-${type} alert-dismissible fade show position-fixed`;
        alertDiv.style.cssText = 'top: 20px; right: 20px; z-index: 9999; min-width: 300px;';
        alertDiv.innerHTML = `
            ${message}
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        `;
        document.body.appendChild(alertDiv);
        setTimeout(() => {
            if (alertDiv.parentNode) {
                alertDiv.remove();
            }
        }, 5000);
    }
    
    // Ø¯Ø§Ù„Ø© Ù„ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© ÙˆØ§Ù„Ù„ÙˆÙ† Ø§Ù„Ù…Ø®ØªØ§Ø±ÙŠÙ†
    function updateSelectedButtons() {
        // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©
        const currentIcon = iconField?.value;
        console.log('ğŸ” ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©:', currentIcon);
        document.querySelectorAll('.icon-btn').forEach(btn => {
            btn.classList.remove('selected');
            if (btn.dataset.icon === currentIcon) {
                btn.classList.add('selected');
                console.log('âœ… ØªÙ… ØªØ­Ø¯ÙŠØ¯ Ø²Ø± Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø©:', currentIcon);
            }
        });
        
        // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ù…Ø®ØªØ§Ø±
        const currentColor = colorField?.value;
        console.log('ğŸ” ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ù…Ø®ØªØ§Ø±:', currentColor);
        document.querySelectorAll('.color-btn').forEach(btn => {
            btn.classList.remove('selected');
            if (btn.dataset.color === currentColor) {
                btn.classList.add('selected');
                console.log('âœ… ØªÙ… ØªØ­Ø¯ÙŠØ¯ Ø²Ø± Ø§Ù„Ù„ÙˆÙ†:', currentColor);
            }
        });
    }
    
    // Ø­Ù„ Ø¬Ø°Ø±ÙŠ - ØªØ´Ø®ÙŠØµ Ø´Ø§Ù…Ù„ ÙˆØªØ­Ø¯ÙŠØ« ÙÙˆØ±ÙŠ
    setTimeout(() => {
        console.log('ğŸš€ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ø£ÙˆÙ„ÙŠØ© - Ø­Ù„ Ø¬Ø°Ø±ÙŠ');
        
        // ÙØ­Øµ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
        console.log('ğŸ” ÙØ­Øµ Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©:');
        console.log('- selectedIconPreview:', document.getElementById('selectedIconPreview') ? 'âœ…' : 'âŒ');
        console.log('- previewIconSmall:', document.getElementById('previewIconSmall') ? 'âœ…' : 'âŒ');
        console.log('- previewIconClass:', document.getElementById('previewIconClass') ? 'âœ…' : 'âŒ');
        console.log('- previewIconLarge:', document.getElementById('previewIconLarge') ? 'âœ…' : 'âŒ');
        console.log('- previewIconClassLarge:', document.getElementById('previewIconClassLarge') ? 'âœ…' : 'âŒ');
        console.log('- previewBadge:', document.getElementById('previewBadge') ? 'âœ…' : 'âŒ');
        
        // ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ù‚ÙŠÙ… Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
        const iconSelect = document.querySelector('select[name="icon"]');
        if (iconSelect && !iconSelect.value) {
            iconSelect.value = 'fas fa-truck';
            console.log('ğŸ”§ ØªÙ… ØªØ¹ÙŠÙŠÙ† Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§ÙØªØ±Ø§Ø¶ÙŠØ©: fas fa-truck');
        }
        
        if (colorField && !colorField.value) {
            colorField.value = '#007bff';
            console.log('ğŸ”§ ØªÙ… ØªØ¹ÙŠÙŠÙ† Ù„ÙˆÙ† Ø§ÙØªØ±Ø§Ø¶ÙŠ: #007bff');
        }
        
        // ØªØ­Ø¯ÙŠØ« ÙÙˆØ±ÙŠ
        updatePreview();
        updateSelectedButtons();
        
        console.log('âœ… Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£ÙˆÙ„ÙŠ');
    }, 200);
    
    // ØªØ­Ø¯ÙŠØ« Ø¯ÙˆØ±ÙŠ Ù„Ù„ØªØ£ÙƒØ¯ Ù…Ù† ØªØ²Ø§Ù…Ù† Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©
    setInterval(() => {
        const iconSelect = document.querySelector('select[name="icon"]');
        if (iconSelect && iconSelect.value) {
            const currentPreviewIcon = document.querySelector('#selectedIconPreview i')?.className;
            if (currentPreviewIcon !== iconSelect.value) {
                console.log('ğŸ”„ ØªØ­Ø¯ÙŠØ« Ø¯ÙˆØ±ÙŠ - Ø¹Ø¯Ù… ØªØ·Ø§Ø¨Ù‚ Ø§ÙƒØªÙØ´Ù:', {
                    selectValue: iconSelect.value,
                    previewIcon: currentPreviewIcon
                });
                updatePreview();
            }
        }
    }, 1000);
});
</script>
