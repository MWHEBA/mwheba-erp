{% comment %}
========================================
BREADCRUMB المركزي - MWHEBA ERP
========================================

الاستخدام:
{% include "shared/breadcrumb.html" with items=breadcrumb_items %}

أو:
{% include "shared/breadcrumb.html" %}
(سيستخدم generated_breadcrumb_items تلقائياً)

معاملات:
- items: قائمة العناصر [{'title': 'الرئيسية', 'url': '/', 'icon': 'fa-home', 'active': False}]
- generated_breadcrumb_items: يتم توليدها تلقائياً من context processor

========================================
{% endcomment %}

{% if items or breadcrumb_items or generated_breadcrumb_items %}
<nav aria-label="breadcrumb" class="page-breadcrumb">
    <ol class="breadcrumb mb-0">
        {% if items %}
            {% for item in items %}
                {% if forloop.last or item.active %}
                    <li class="breadcrumb-item active" aria-current="page">
                        {% if item.icon %}<i class="{{ item.icon }} me-1"></i>{% endif %}
                        {{ item.title }}
                    </li>
                {% else %}
                    <li class="breadcrumb-item">
                        <a href="{{ item.url }}">
                            {% if item.icon %}<i class="{{ item.icon }} me-1"></i>{% endif %}
                            {{ item.title }}
                        </a>
                    </li>
                {% endif %}
            {% endfor %}
        {% elif breadcrumb_items %}
            {% for item in breadcrumb_items %}
                {% if forloop.last or item.active %}
                    <li class="breadcrumb-item active" aria-current="page">
                        {% if item.icon %}<i class="{{ item.icon }} me-1"></i>{% endif %}
                        {{ item.title }}
                    </li>
                {% else %}
                    <li class="breadcrumb-item">
                        <a href="{{ item.url }}">
                            {% if item.icon %}<i class="{{ item.icon }} me-1"></i>{% endif %}
                            {{ item.title }}
                        </a>
                    </li>
                {% endif %}
            {% endfor %}
        {% elif generated_breadcrumb_items %}
            {% for item in generated_breadcrumb_items %}
                {% if forloop.last or item.active %}
                    <li class="breadcrumb-item active" aria-current="page">
                        {% if item.icon %}<i class="{{ item.icon }} me-1"></i>{% endif %}
                        {{ item.title }}
                    </li>
                {% else %}
                    <li class="breadcrumb-item">
                        <a href="{{ item.url }}">
                            {% if item.icon %}<i class="{{ item.icon }} me-1"></i>{% endif %}
                            {{ item.title }}
                        </a>
                    </li>
                {% endif %}
            {% endfor %}
        {% endif %}
    </ol>
</nav>
{% endif %}
