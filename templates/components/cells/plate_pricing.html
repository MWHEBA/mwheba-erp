{% load i18n %}
{% load custom_filters %}
{% load utils_extras %}

{% if item.category.code == 'plates' and item.plate_details %}
    <div class="plate-pricing-cell text-center">
        <!-- سعر الزنك الواحد -->
        <div class="fw-bold text-success mb-1">
            <i class="fas fa-layer-group me-1"></i>
            {{ item.plate_details.price_per_plate|currency }}
        </div>
        <small class="text-muted d-block">للزنك الواحد</small>
        
        <!-- سعر الطقم إذا كان موجود -->
        {% if item.plate_details.set_price and item.plate_details.set_price > 0 %}
            <div class="mt-2 pt-2 border-top">
                <div class="fw-bold text-primary">
                    <i class="fas fa-boxes me-1"></i>
                    {{ item.plate_details.set_price|currency }}
                </div>
                <small class="text-muted d-block">طقم 4 زنكات</small>
                
                <!-- حساب الوفورات -->
                {% with individual_cost=item.plate_details.price_per_plate|multiply:4 %}
                    {% with savings=individual_cost|sub:item.plate_details.set_price %}
                        {% if savings > 0 %}
                            <small class="text-success d-block mt-1">
                                <i class="fas fa-arrow-down me-1"></i>
                                وفر {{ savings|currency }}
                            </small>
                        {% endif %}
                    {% endwith %}
                {% endwith %}
            </div>
        {% endif %}
    </div>
{% else %}
    <span class="text-muted">-</span>
{% endif %}
