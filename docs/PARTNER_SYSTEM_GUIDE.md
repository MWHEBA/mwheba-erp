# ุฏููู ูุธุงู ุงูุดุฑุงูุฉ - MWHEBA ERP

## ูุธุฑุฉ ุนุงูุฉ

ูุธุงู ุฅุฏุงุฑุฉ ูุณุงููุงุช ูุณุญูุจุงุช ุงูุดุฑูู ูู ูุธุงู ุดุงูู ููุชูุงูู ูุน ุงููุธุงู ุงููุงูู ุงูุญุงูู ูุฅุฏุงุฑุฉ ูุนุงููุงุช ุงูุดุฑูู ุจุดูู ุงุญุชุฑุงูู ูููุธู.

## ุงูููููุงุช ุงูุฑุฆูุณูุฉ

### 1. ุงููุณุงููุงุช (5 ููููุงุช)
- **ููุน ูุนุงููุฉ PARTNER_CONTRIBUTION** ูู ุงูุฅูุฑุงุฏุงุช
- **ููุฏุงู ูุณุงููุฉ ุณุฑูุนุฉ** ูุน ุงูุญููู ุงููุทููุจุฉ
- **ุชุชุจุน ูุณุงููุงุช ุงูุดุฑูู** ูุชูุงุฑูุฑ ุดุงููุฉ
- **ุฅุนุฏุงุฏุงุช ุงูุดุฑุงูุฉ** ูุงูุตูุงุญูุงุช
- **ุงูุชูุงูู** ูุน ุงููุธุงู ุงููุงูู ุงูุญุงูู

### 2. ุงูุณุญูุจุงุช (3 ููููุงุช)
- **ููุน ูุนุงููุฉ PARTNER_WITHDRAWAL** ูู ุงููุตุฑููุงุช  
- **ููุฏุงู ุณุญุจ ุณุฑูุน** ูุน ุถูุงุจุท ุงูุฑุตูุฏ
- **ุชุชุจุน ุนูููุงุช ุงูุณุญุจ** ูุณุฌู ุงููุฑุงุฌุนุฉ

## ุงูููุฒุงุช ุงูุฃุณุงุณูุฉ

### ๐ฆ ุงููุธุงู ุงููุงูู
- **ูููุฏ ูุญุงุณุจูุฉ ุชููุงุฆูุฉ** ุตุญูุญุฉ ููุชูุงููุฉ ูุน ุงููุนุงููุฑ
- **ุฑุจุท ุจุญุณุงุจ "ุฌุงุฑู ุงูุดุฑูู - ูุญูุฏ ููุณู"** ุงูููุฌูุฏ
- **ุชุชุจุน ุงูุฃุฑุตุฏุฉ** ูู ุงูููุช ุงููุนูู
- **ุชูุงูู ูุงูู** ูุน ุงููุธุงู ุงููุญุงุณุจู ุงูุญุงูู

### ๐ฐ ุฅุฏุงุฑุฉ ุงููุนุงููุงุช
- **ูุณุงููุงุช ูุชููุนุฉ**: ูุฑุถ ููุดุฑูุฉุ ุฒูุงุฏุฉ ุฑุฃุณ ุงููุงูุ ูุณุงููุฉ ูุคูุชุฉ
- **ุณุญูุจุงุช ูุฑูุฉ**: ุณุฏุงุฏ ูุฑุถุ ุณุญุจ ูู ุฑุฃุณ ุงููุงูุ ุชูุฒูุน ุฃุฑุจุงุญุ ูุตุฑูู ุดุฎุตู
- **ุญุฏูุฏ ุฐููุฉ**: ุญุฏูุฏ ููููุฉ ูุดูุฑูุฉ ูุงุจูุฉ ููุชุฎุตูุต
- **ููุงููุงุช ุชููุงุฆูุฉ** ุฃู ูุฏููุฉ ุญุณุจ ุงููุจูุบ

### ๐ ุงูุชุชุจุน ูุงูุชูุงุฑูุฑ
- **ููุญุฉ ุชุญูู ุดุงููุฉ** ูุน ุฅุญุตุงุฆูุงุช ููุฑูุฉ
- **ุชูุงุฑูุฑ ุฏูุฑูุฉ** (ููููุฉุ ุฃุณุจูุนูุฉุ ุดูุฑูุฉ)
- **ุณุฌู ุชุฏููู ูุงูู** ูุฌููุน ุงูุนูููุงุช
- **ุชุชุจุน ุงูุฃุฑุตุฏุฉ** ูุงูุชุฏููุงุช ุงูููุฏูุฉ

### ๐ ุงูุฃูุงู ูุงูุตูุงุญูุงุช
- **ูุธุงู ุตูุงุญูุงุช ูุชูุฏู** ูุน 9 ุฃููุงุน ูุฎุชููุฉ
- **ุณุฌู ุชุฏููู ุดุงูู** ูุฌููุน ุงูุฃูุดุทุฉ
- **ุญุฏูุฏ ุฃูุงู** ูุถูุงุจุท ูููุนุงููุงุช
- **ุฅุดุนุงุฑุงุช ุชููุงุฆูุฉ** ููุนูููุงุช ุงููููุฉ

## ุงูุชุซุจูุช ูุงูุฅุนุฏุงุฏ

### 1. ุชุดุบูู Migration
```bash
python manage.py migrate financial
```

### 2. ุชููุฆุฉ ุงููุธุงู
```bash
python manage.py setup_partner_system --admin-username=admin_user --sync-existing
```

### 3. ุฅูุดุงุก ุงูุตูุงุญูุงุช
```bash
python manage.py setup_partner_system --admin-username=your_admin_username
```

## ุงูุงุณุชุฎุฏุงู

### ุงููุตูู ูููุธุงู
- **ููุญุฉ ุงูุชุญูู**: `/financial/partner/`
- **ูุงุฆูุฉ ุงููุนุงููุงุช**: `/financial/partner/transactions/`
- **ุงูุฅุนุฏุงุฏุงุช**: `/financial/partner/settings/`
- **ุงูุตูุงุญูุงุช**: `/financial/partner/permissions/`

### ุฅุถุงูุฉ ูุณุงููุฉ
1. ุงุฐูุจ ุฅูู ููุญุฉ ุชุญูู ุงูุดุฑูู
2. ุงุถุบุท ุนูู "ูุณุงููุฉ ุฌุฏูุฏุฉ"
3. ุงููุฃ ุงูุจูุงูุงุช ุงููุทููุจุฉ:
   - ุงููุจูุบ
   - ููุน ุงููุณุงููุฉ
   - ุงูุฎุฒููุฉ ุงููุณุชูุจูุฉ
   - ุงููุตู
4. ุงุถุบุท "ุฅุถุงูุฉ ุงููุณุงููุฉ"

### ุฅุถุงูุฉ ุณุญุจ
1. ุงุฐูุจ ุฅูู ููุญุฉ ุชุญูู ุงูุดุฑูู
2. ุงุถุบุท ุนูู "ุณุญุจ ูุจูุบ"
3. ุงููุฃ ุงูุจูุงูุงุช ุงููุทููุจุฉ:
   - ุงููุจูุบ (ูุน ุงูุชุญูู ูู ุงูุฑุตูุฏ)
   - ููุน ุงูุณุญุจ
   - ุงูุฎุฒููุฉ ุงููุณุญูุจ ูููุง
   - ุงููุตู
4. ุงุถุบุท "ุชุฃููุฏ ุงูุณุญุจ"

## ุงูุฅุนุฏุงุฏุงุช

### ุญุฏูุฏ ุงููุนุงููุงุช
- **ุงูุญุฏ ุงูุฃูุตู ูููุณุงููุฉ ุงูููููุฉ**: 100,000 ุฌ.ู (ุงูุชุฑุงุถู)
- **ุงูุญุฏ ุงูุฃูุตู ููุณุญุจ ุงููููู**: 50,000 ุฌ.ู (ุงูุชุฑุงุถู)
- **ุงูุญุฏ ุงูุฃูุตู ููุณุญุจ ุงูุดูุฑู**: 200,000 ุฌ.ู (ุงูุชุฑุงุถู)
- **ุงูุญุฏ ุงูุฃุฏูู ููุฑุตูุฏ**: 0 ุฌ.ู (ุงูุชุฑุงุถู)

### ุงูููุงููุงุช
- **ููุงููุฉ ุชููุงุฆูุฉ ุนูู ุงููุณุงููุงุช**: ููุนู (ุงูุชุฑุงุถู)
- **ููุงููุฉ ุชููุงุฆูุฉ ุนูู ุงูุณุญูุจุงุช**: ููุนู (ุงูุชุฑุงุถู)
- **ูุจูุบ ูุชุทูุจ ููุงููุฉ ูุฏููุฉ**: 10,000 ุฌ.ู (ุงูุชุฑุงุถู)

### ุงูุฅุดุนุงุฑุงุช
- **ุฅุดุนุงุฑ ุนูุฏ ุงููุณุงููุฉ**: ููุนู
- **ุฅุดุนุงุฑ ุนูุฏ ุงูุณุญุจ**: ููุนู
- **ุฅุดุนุงุฑ ุนูุฏ ุงูุฎูุงุถ ุงูุฑุตูุฏ**: ููุนู
- **ุญุฏ ุงูุฑุตูุฏ ุงูููุฎูุถ**: 5,000 ุฌ.ู

## ุงูุตูุงุญูุงุช

### ุฃููุงุน ุงูุตูุงุญูุงุช
1. **ุนุฑุถ ููุญุฉ ุงูุชุญูู** (`view_dashboard`)
2. **ุฅูุดุงุก ูุณุงููุฉ** (`create_contribution`)
3. **ุฅูุดุงุก ุณุญุจ** (`create_withdrawal`)
4. **ุนุฑุถ ุงููุนุงููุงุช** (`view_transactions`)
5. **ุนุฑุถ ุงูุฑุตูุฏ** (`view_balance`)
6. **ุงูููุงููุฉ ุนูู ุงููุนุงููุงุช** (`approve_transactions`)
7. **ุฅูุบุงุก ุงููุนุงููุงุช** (`cancel_transactions`)
8. **ุนุฑุถ ุงูุชูุงุฑูุฑ** (`view_reports`)
9. **ุฅุฏุงุฑุฉ ุงูุฅุนุฏุงุฏุงุช** (`manage_settings`)

### ููุญ ุงูุตูุงุญูุงุช
```python
from financial.models import PartnerPermission
from django.contrib.auth import get_user_model

User = get_user_model()
user = User.objects.get(username='username')

# ููุญ ุตูุงุญูุฉ
PartnerPermission.grant_permission(
    user=user,
    permission_type='view_dashboard',
    granted_by=admin_user
)
```

## ุงููููุฏ ุงููุญุงุณุจูุฉ

### ูุณุงููุฉ ุงูุดุฑูู
```
ูุฏูู: ุญุณุงุจ ุงูุฎุฒููุฉ (ุฒูุงุฏุฉ ุงูููุฏูุฉ)
ุฏุงุฆู: ุฌุงุฑู ุงูุดุฑูู (ุฒูุงุฏุฉ ุงูุชุฒุงู ุงูุดุฑูุฉ)
```

### ุณุญุจ ุงูุดุฑูู
```
ูุฏูู: ุฌุงุฑู ุงูุดุฑูู (ุชูููู ุงูุชุฒุงู ุงูุดุฑูุฉ)
ุฏุงุฆู: ุญุณุงุจ ุงูุฎุฒููุฉ (ููุต ุงูููุฏูุฉ)
```

## API Endpoints

### ูุนูููุงุช ุงูุฑุตูุฏ
```
GET /financial/api/partner/balance/?partner_account_id=123
```

### ุฅูุดุงุก ูุณุงููุฉ
```
POST /financial/partner/contribute/
```

### ุฅูุดุงุก ุณุญุจ
```
POST /financial/partner/withdraw/
```

## ุณุฌู ุงูุชุฏููู

ูุชู ุชุณุฌูู ุฌููุน ุงูุนูููุงุช ุงูุชุงููุฉ:
- ุฅูุดุงุก ุงููุณุงููุงุช ูุงูุณุญูุจุงุช
- ุงูููุงููุฉ ุนูู ุงููุนุงููุงุช ุฃู ุฅูุบุงุคูุง
- ุชุญุฏูุซ ุงูุฅุนุฏุงุฏุงุช
- ููุญ ุฃู ุฅูุบุงุก ุงูุตูุงุญูุงุช
- ุนุฑุถ ููุญุฉ ุงูุชุญูู ูุงูุชูุงุฑูุฑ

## ุงูุฃูุงู

### ุงูุชุญููุงุช ุงูุชููุงุฆูุฉ
- **ุงูุชุญูู ูู ุงูุฑุตูุฏ** ูุจู ุงูุณุญุจ
- **ุงูุชุญูู ูู ุงูุญุฏูุฏ** ุงูููููุฉ ูุงูุดูุฑูุฉ
- **ุงูุชุญูู ูู ุงูุตูุงุญูุงุช** ููู ุนูููุฉ
- **ุชุณุฌูู IP Address** ู User Agent

### ุงูุญูุงูุฉ ูู ุงูุฃุฎุทุงุก
- **ูุนุงูุฌุฉ ุดุงููุฉ ููุฃุฎุทุงุก** ูุน ุฑุณุงุฆู ูุงุถุญุฉ
- **ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช** ูุจู ุงููุนุงูุฌุฉ
- **ุญูุงูุฉ ูู SQL Injection** ู XSS
- **CSRF Protection** ูุฌููุน ุงูููุงุฐุฌ

## ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ูุดุงูู ุดุงุฆุนุฉ

#### ุฎุทุฃ "ูู ูุชู ุงูุนุซูุฑ ุนูู ุญุณุงุจ ุงูุดุฑูู"
```bash
python manage.py setup_partner_system
```

#### ุฎุทุฃ ูู ุงูุตูุงุญูุงุช
```python
# ุงูุชุญูู ูู ุงูุตูุงุญูุงุช
from financial.models import PartnerPermission
PartnerPermission.user_has_permission(user, 'view_dashboard')
```

#### ูุดุงูู ูู ุงูุฃุฑุตุฏุฉ
```python
# ุฅุนุงุฏุฉ ุญุณุงุจ ุงูุฑุตูุฏ
from financial.models import PartnerBalance
balance = PartnerBalance.objects.get(partner_account=account)
balance.update_balance()
```

## ุงูุชุทููุฑ ุงููุณุชูุจูู

### ููุฒุงุช ูุฎุทุทุฉ
- **ุชูุงุฑูุฑ ูุชูุฏูุฉ** ูุน ุฑุณูู ุจูุงููุฉ
- **ุฅุดุนุงุฑุงุช ุงูุจุฑูุฏ ุงูุฅููุชุฑููู** ูุงูู SMS
- **API ูุชูุฏู** ููุชูุงูู ูุน ุฃูุธูุฉ ุฎุงุฑุฌูุฉ
- **ุฏุนู ุดุฑูุงุก ูุชุนุฏุฏูู**
- **ุชุญูููุงุช ุฐููุฉ** ููุชุฏููุงุช ุงูููุฏูุฉ

### ุงูุชุฎุตูุต
ูููู ุชุฎุตูุต ุงููุธุงู ุจุณูููุฉ ูู ุฎูุงู:
- ุชุนุฏูู ุงูุฅุนุฏุงุฏุงุช ูู `/financial/partner/settings/`
- ุฅุถุงูุฉ ุฃููุงุน ุฌุฏูุฏุฉ ูููุณุงููุงุช ูุงูุณุญูุจุงุช
- ุชุฎุตูุต ุงูุชูุงุฑูุฑ ูุงูุฅุดุนุงุฑุงุช
- ุฅุถุงูุฉ ููุงุนุฏ ุนูู ุฌุฏูุฏุฉ

## ุงูุฏุนู ุงูููู

ููุญุตูู ุนูู ุงูุฏุนู ุงูููู:
1. ุฑุงุฌุน ูุฐุง ุงูุฏููู ุฃููุงู
2. ุชุญูู ูู ุณุฌู ุงูุฃุฎุทุงุก ูู Django
3. ุงุณุชุฎุฏู ุฃูุงูุฑ ุงูุชุดุฎูุต ุงููุชุงุญุฉ
4. ุงุชุตู ุจูุฑูู ุงูุชุทููุฑ

---

**ุชู ุชุทููุฑ ูุฐุง ุงููุธุงู ุจูุงุณุทุฉ ูุฑูู MWHEBA ERP**
**ุขุฎุฑ ุชุญุฏูุซ: ุฃูุชูุจุฑ 2025**
