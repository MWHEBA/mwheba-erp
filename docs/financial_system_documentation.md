# ğŸ¦ Ø¯Ù„ÙŠÙ„ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø§Ù„ÙŠ Ø§Ù„Ø´Ø§Ù…Ù„ - MWHEBA ERP

## ğŸ“‹ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙŠØ§Øª

1. [Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©](#Ù†Ø¸Ø±Ø©-Ø¹Ø§Ù…Ø©)
2. [Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù†Ø¸Ø§Ù…](#Ù‡ÙŠÙƒÙ„-Ø§Ù„Ù†Ø¸Ø§Ù…)
3. [Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ù…Ø­Ø§Ø³Ø¨ÙŠØ©](#Ø§Ù„Ù†Ù…Ø§Ø°Ø¬-Ø§Ù„Ù…Ø­Ø§Ø³Ø¨ÙŠØ©)
4. [Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ©](#Ø§Ù„Ø®Ø¯Ù…Ø§Øª-Ø§Ù„Ù…Ø§Ù„ÙŠØ©)
5. [Ù†Ø¸Ø§Ù… ØªØ²Ø§Ù…Ù† Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª](#Ù†Ø¸Ø§Ù…-ØªØ²Ø§Ù…Ù†-Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª)
6. [Ø¯Ù„ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…](#Ø¯Ù„ÙŠÙ„-Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…)
7. [Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…Ø§Ù„ÙŠØ©](#Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±-Ø§Ù„Ù…Ø§Ù„ÙŠØ©)
8. [Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ](#Ø§Ù„Ù†Ø³Ø®-Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ)
9. [Ø§Ù„Ø£Ø¯Ø§Ø¡ ÙˆØ§Ù„ØªØ­Ø³ÙŠÙ†](#Ø§Ù„Ø£Ø¯Ø§Ø¡-ÙˆØ§Ù„ØªØ­Ø³ÙŠÙ†)
10. [Ø¯Ù„ÙŠÙ„ Ø§Ù„ØªØ·ÙˆÙŠØ±](#Ø¯Ù„ÙŠÙ„-Ø§Ù„ØªØ·ÙˆÙŠØ±)
11. [Ø§Ø³ØªÙƒØ´Ø§Ù Ø§Ù„Ø£Ø®Ø·Ø§Ø¡](#Ø§Ø³ØªÙƒØ´Ø§Ù-Ø§Ù„Ø£Ø®Ø·Ø§Ø¡)

---

## ğŸ¯ Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©

Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØªÙ‚Ø¯Ù… Ù‡Ùˆ Ù†Ø¸Ø§Ù… Ù…Ø­Ø§Ø³Ø¨ÙŠ Ø´Ø§Ù…Ù„ Ù…Ø·ÙˆØ± Ù„Ù†Ø¸Ø§Ù… ERP Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Django. ÙŠÙˆÙØ± Ø§Ù„Ù†Ø¸Ø§Ù…:

### âœ¨ Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
- **Ù†Ø¸Ø§Ù… Ù‚ÙŠÙˆØ¯ Ù…Ø²Ø¯ÙˆØ¬Ø©** Ù…ØªÙƒØ§Ù…Ù„ ÙˆÙ…ØªÙˆØ§Ø²Ù† ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
- **Ø¯Ù„ÙŠÙ„ Ø­Ø³Ø§Ø¨Ø§Øª Ù‡Ø±Ù…ÙŠ** Ø´Ø§Ù…Ù„ ÙˆÙ…Ø±Ù†
- **ØªØ²Ø§Ù…Ù† ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª** Ù…Ø¹ Ù†Ø¸Ø§Ù… rollback
- **ØªÙ‚Ø§Ø±ÙŠØ± Ù…Ø§Ù„ÙŠØ© Ù…ØªÙ‚Ø¯Ù…Ø©** Ù…Ø¹ ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡
- **Ù†Ø¸Ø§Ù… ÙƒØ§Ø´ Ù…ØªØ¹Ø¯Ø¯ Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª** Ù…Ø¹ Redis
- **Ù†Ø³Ø® Ø§Ø­ØªÙŠØ§Ø·ÙŠ Ø°ÙƒÙŠ** Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ©

### ğŸ—ï¸ Ø§Ù„Ù…Ø¹Ù…Ø§Ø±ÙŠØ©
- **Django Framework** Ù…Ø¹ Python 3.8+
- **PostgreSQL** ÙƒÙ‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø±Ø¦ÙŠØ³ÙŠØ©
- **Redis** Ù„Ù„ÙƒØ§Ø´ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…
- **Celery** Ù„Ù„Ù…Ù‡Ø§Ù… ØºÙŠØ± Ø§Ù„Ù…ØªØ²Ø§Ù…Ù†Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)

---

## ğŸ—ï¸ Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù†Ø¸Ø§Ù…

```
financial/
â”œâ”€â”€ models/                     # Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ù…Ø­Ø§Ø³Ø¨ÙŠØ©
â”‚   â”œâ”€â”€ chart_of_accounts.py   # Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª
â”‚   â”œâ”€â”€ journal_entry.py       # Ø§Ù„Ù‚ÙŠÙˆØ¯ Ø§Ù„Ù…Ø­Ø§Ø³Ø¨ÙŠØ©
â”‚   â”œâ”€â”€ enhanced_balance.py    # Ù†Ø¸Ø§Ù… Ø§Ù„Ø£Ø±ØµØ¯Ø© Ø§Ù„Ù…Ø­Ø³Ù†
â”‚   â””â”€â”€ payment_sync.py        # ØªØ²Ø§Ù…Ù† Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª
â”œâ”€â”€ services/                   # Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ©
â”‚   â”œâ”€â”€ journal_service.py     # Ø®Ø¯Ù…Ø© Ø§Ù„Ù‚ÙŠÙˆØ¯
â”‚   â”œâ”€â”€ enhanced_balance_service.py
â”‚   â”œâ”€â”€ payment_sync_service.py
â”‚   â”œâ”€â”€ advanced_reports_service.py
â”‚   â”œâ”€â”€ financial_backup_service.py
â”‚   â””â”€â”€ redis_cache_service.py
â”œâ”€â”€ signals/                    # Django Signals
â”‚   â””â”€â”€ payment_signals.py
â”œâ”€â”€ tests/                      # Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª
â”‚   â”œâ”€â”€ test_enhanced_balance_system.py
â”‚   â”œâ”€â”€ test_payment_sync_system.py
â”‚   â””â”€â”€ test_performance_stress.py
â”œâ”€â”€ migrations/                 # Ù…ÙŠØ¬Ø±ÙŠØ´Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
â”œâ”€â”€ fixtures/                   # Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£ÙˆÙ„ÙŠØ©
â””â”€â”€ admin_payment_sync.py      # ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©
```

---

## ğŸ“Š Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ù…Ø­Ø§Ø³Ø¨ÙŠØ©

### 1. AccountType - Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª

```python
class AccountType(models.Model):
    code = models.CharField(max_length=10, unique=True)
    name = models.CharField(max_length=100)
    category = models.CharField(max_length=20, choices=CATEGORY_CHOICES)
    nature = models.CharField(max_length=10, choices=NATURE_CHOICES)
```

**Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª Ø§Ù„Ù…Ø¯Ø¹ÙˆÙ…Ø©:**
- `asset` - Ø§Ù„Ø£ØµÙˆÙ„
- `liability` - Ø§Ù„Ø®ØµÙˆÙ…  
- `equity` - Ø­Ù‚ÙˆÙ‚ Ø§Ù„Ù…Ù„ÙƒÙŠØ©
- `revenue` - Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª
- `expense` - Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª

### 2. ChartOfAccounts - Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª

```python
class ChartOfAccounts(models.Model):
    code = models.CharField(max_length=20, unique=True)
    name = models.CharField(max_length=200)
    parent = models.ForeignKey('self', null=True, blank=True)
    account_type = models.ForeignKey(AccountType)
    is_leaf = models.BooleanField(default=True)
    is_active = models.BooleanField(default=True)
```

**Ø§Ù„Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù‡Ø±Ù…ÙŠ:**
```
1000 - Ø§Ù„Ø£ØµÙˆÙ„
â”œâ”€â”€ 1001 - Ø§Ù„Ø£ØµÙˆÙ„ Ø§Ù„Ù…ØªØ¯Ø§ÙˆÙ„Ø©
â”‚   â”œâ”€â”€ 1001001 - Ø§Ù„Ø®Ø²ÙŠÙ†Ø©
â”‚   â””â”€â”€ 1001002 - Ø§Ù„Ø¨Ù†Ùƒ Ø§Ù„Ø£Ù‡Ù„ÙŠ
â””â”€â”€ 1002 - Ø§Ù„Ø£ØµÙˆÙ„ Ø§Ù„Ø«Ø§Ø¨ØªØ©
    â””â”€â”€ 1002001 - Ø§Ù„Ù…Ø¹Ø¯Ø§Øª
```

### 3. JournalEntry - Ø§Ù„Ù‚ÙŠÙˆØ¯ Ø§Ù„Ù…Ø­Ø§Ø³Ø¨ÙŠØ©

```python
class JournalEntry(models.Model):
    number = models.CharField(max_length=50, unique=True)
    date = models.DateField()
    description = models.TextField()
    status = models.CharField(max_length=20, choices=STATUS_CHOICES)
    accounting_period = models.ForeignKey(AccountingPeriod)
```

**Ø­Ø§Ù„Ø§Øª Ø§Ù„Ù‚ÙŠØ¯:**
- `draft` - Ù…Ø³ÙˆØ¯Ø©
- `posted` - Ù…Ø±Ø­Ù„
- `cancelled` - Ù…Ù„ØºÙŠ

### 4. JournalEntryLine - Ø¨Ù†ÙˆØ¯ Ø§Ù„Ù‚ÙŠÙˆØ¯

```python
class JournalEntryLine(models.Model):
    journal_entry = models.ForeignKey(JournalEntry, related_name='lines')
    account = models.ForeignKey(ChartOfAccounts)
    debit = models.DecimalField(max_digits=15, decimal_places=2, default=0)
    credit = models.DecimalField(max_digits=15, decimal_places=2, default=0)
```

---

## âš™ï¸ Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ©

### 1. JournalEntryService - Ø®Ø¯Ù…Ø© Ø§Ù„Ù‚ÙŠÙˆØ¯

```python
# Ø¥Ù†Ø´Ø§Ø¡ Ù‚ÙŠØ¯ Ø¨Ø³ÙŠØ·
entry = JournalEntryService.create_simple_entry(
    debit_account='1001',      # Ø§Ù„Ø®Ø²ÙŠÙ†Ø©
    credit_account='4001',     # Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª
    amount=Decimal('1000'),
    description='Ø¨ÙŠØ¹ Ù†Ù‚Ø¯ÙŠ',
    date=date.today(),
    user=request.user
)

# Ø¥Ù†Ø´Ø§Ø¡ Ù‚ÙŠØ¯ Ù…Ø±ÙƒØ¨
entry = JournalEntryService.create_compound_entry(
    lines=[
        {'account': '1001', 'debit': 800, 'credit': 0},
        {'account': '1201', 'debit': 200, 'credit': 0},
        {'account': '4001', 'debit': 0, 'credit': 1000}
    ],
    description='Ø¨ÙŠØ¹ Ø¨Ø§Ù„Ø¢Ø¬Ù„',
    date=date.today(),
    user=request.user
)
```

### 2. EnhancedBalanceService - Ø®Ø¯Ù…Ø© Ø§Ù„Ø£Ø±ØµØ¯Ø© Ø§Ù„Ù…Ø­Ø³Ù†Ø©

```python
# Ø­Ø³Ø§Ø¨ Ø±ØµÙŠØ¯ Ø­Ø³Ø§Ø¨
balance = EnhancedBalanceService.get_account_balance_optimized(
    account='1001',
    date_to=date.today(),
    use_cache=True
)

# Ù…ÙŠØ²Ø§Ù† Ù…Ø±Ø§Ø¬Ø¹Ø© Ù…Ø­Ø³Ù†
trial_balance = EnhancedBalanceService.get_trial_balance_optimized(
    date_from=date(2025, 1, 1),
    date_to=date.today()
)

# Ø¥Ù†Ø´Ø§Ø¡ Ù„Ù‚Ø·Ø© Ø±ØµÙŠØ¯
EnhancedBalanceService.create_balance_snapshot(
    account=account_obj,
    snapshot_date=date.today()
)
```

### 3. PaymentSyncService - Ø®Ø¯Ù…Ø© ØªØ²Ø§Ù…Ù† Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª

```python
# ØªØ²Ø§Ù…Ù† Ø¯ÙØ¹Ø©
sync_operation = payment_sync_service.sync_payment(
    payment_obj=sale_payment,
    operation_type='create_payment',
    user=request.user
)

# Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø§Ù„Ø© Ø§Ù„ØªØ²Ø§Ù…Ù†
if sync_operation.status == 'completed':
    print("ØªÙ… Ø§Ù„ØªØ²Ø§Ù…Ù† Ø¨Ù†Ø¬Ø§Ø­")
elif sync_operation.status == 'failed':
    print(f"ÙØ´Ù„ Ø§Ù„ØªØ²Ø§Ù…Ù†: {sync_operation.error_message}")
```

---

## ğŸ”„ Ù†Ø¸Ø§Ù… ØªØ²Ø§Ù…Ù† Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª

### Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ø§Ù„Ù…Ø­Ù„ÙˆÙ„Ø©
- **Ù‚Ø¨Ù„**: Ø¯ÙØ¹Ø§Øª Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª ØªÙØ³Ø¬Ù„ ÙÙŠ `SalePayment` ÙÙ‚Ø·
- **Ø¨Ø¹Ø¯**: ØªØ²Ø§Ù…Ù† ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù…Ø¹ `CustomerPayment` + Ù‚ÙŠÙˆØ¯ Ù…Ø­Ø§Ø³Ø¨ÙŠØ©

### Ø¢Ù„ÙŠØ© Ø§Ù„Ø¹Ù…Ù„

```mermaid
graph TD
    A[Ø¥Ù†Ø´Ø§Ø¡ Ø¯ÙØ¹Ø© Ù…Ø¨ÙŠØ¹Ø§Øª] --> B[Django Signal]
    B --> C[PaymentSyncService]
    C --> D[Ø¥Ù†Ø´Ø§Ø¡ CustomerPayment]
    C --> E[Ø¥Ù†Ø´Ø§Ø¡ Ù‚ÙŠØ¯ Ù…Ø­Ø§Ø³Ø¨ÙŠ]
    C --> F[ØªØ­Ø¯ÙŠØ« ÙƒØ§Ø´ Ø§Ù„Ø£Ø±ØµØ¯Ø©]
    D --> G[Ù†Ø¬Ø­ Ø§Ù„ØªØ²Ø§Ù…Ù†]
    E --> G
    F --> G
    C --> H[Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ²Ø§Ù…Ù†]
    H --> I[Rollback ØªÙ„Ù‚Ø§Ø¦ÙŠ]
```

### Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„ØªØ²Ø§Ù…Ù†

```json
{
  "name": "ØªØ²Ø§Ù…Ù† Ø¯ÙØ¹Ø§Øª Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª",
  "source_model": "sale_payment",
  "trigger_event": "on_create",
  "sync_to_customer_payment": true,
  "sync_to_journal_entry": true,
  "sync_to_balance_cache": true
}
```

### Django Signals Ø§Ù„Ù…Ø­Ø³Ù†Ø©

```python
@receiver(post_save, sender=SalePayment)
def sale_payment_saved(sender, instance, created, **kwargs):
    if created:
        # ØªØ£Ø¬ÙŠÙ„ Ø§Ù„ØªØ²Ø§Ù…Ù† Ø­ØªÙ‰ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©
        transaction.on_commit(
            lambda: payment_sync_service.sync_payment(
                instance, 'create_payment'
            )
        )
```

---

## ğŸ“ˆ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…Ø§Ù„ÙŠØ©

### 1. Ù…ÙŠØ²Ø§Ù† Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø´Ø§Ù…Ù„

```python
trial_balance = AdvancedReportsService.generate_comprehensive_trial_balance(
    date_from=date(2025, 1, 1),
    date_to=date.today(),
    include_zero_balances=False,
    group_by_type=True
)
```

**Ø§Ù„Ù†ØªÙŠØ¬Ø©:**
```json
{
  "report_info": {
    "title": "Ù…ÙŠØ²Ø§Ù† Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø´Ø§Ù…Ù„",
    "date_from": "2025-01-01",
    "date_to": "2025-12-31"
  },
  "accounts": [...],
  "category_totals": {
    "asset": {"debit_balance": 50000, "credit_balance": 0},
    "liability": {"debit_balance": 0, "credit_balance": 30000}
  },
  "is_balanced": true
}
```

### 2. Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¯Ø®Ù„

```python
income_statement = AdvancedReportsService.generate_income_statement(
    date_from=date(2025, 1, 1),
    date_to=date.today(),
    comparative_period=True
)
```

### 3. Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø§Ù„Ø¹Ù…ÙˆÙ…ÙŠØ©

```python
balance_sheet = AdvancedReportsService.generate_balance_sheet(
    as_of_date=date.today()
)
```

### 4. Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªØ¯ÙÙ‚Ø§Øª Ø§Ù„Ù†Ù‚Ø¯ÙŠØ©

```python
cash_flow = AdvancedReportsService.generate_cash_flow_statement(
    date_from=date(2025, 1, 1),
    date_to=date.today()
)
```

---

## ğŸ’¾ Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ

### Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© ÙƒØ§Ù…Ù„Ø©

```python
from financial.services.financial_backup_service import FinancialBackupService

backup_service = FinancialBackupService()

# Ù†Ø³Ø®Ø© ÙƒØ§Ù…Ù„Ø©
backup_info = backup_service.create_full_backup(include_logs=True)

# Ù†Ø³Ø®Ø© ØªØ¯Ø±ÙŠØ¬ÙŠØ©
backup_info = backup_service.create_incremental_backup(
    since_date=datetime.now() - timedelta(days=7)
)
```

### Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©

```python
# Ø§Ø³ØªØ¹Ø§Ø¯Ø© ÙƒØ§Ù…Ù„Ø©
restore_info = backup_service.restore_backup(
    backup_path='/path/to/backup.tar.gz'
)

# Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù†ØªÙ‚Ø§Ø¦ÙŠØ©
restore_info = backup_service.restore_backup(
    backup_path='/path/to/backup.tar.gz',
    selective_restore=['ChartOfAccounts', 'JournalEntry']
)
```

### Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©

```python
# Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ù…ØªØ§Ø­Ø©
backups = backup_service.list_backups()

# ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©
cleanup_result = backup_service.cleanup_old_backups(keep_days=30)

# Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø³Ù„Ø§Ù…Ø© Ø§Ù„Ù†Ø³Ø®Ø©
verification = backup_service.verify_backup_integrity(backup_path)
```

---

## âš¡ Ø§Ù„Ø£Ø¯Ø§Ø¡ ÙˆØ§Ù„ØªØ­Ø³ÙŠÙ†

### 1. Ù†Ø¸Ø§Ù… Ø§Ù„ÙƒØ§Ø´ Ø§Ù„Ù…ØªØ¹Ø¯Ø¯ Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª

```python
# ÙƒØ§Ø´ Redis Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¤Ù‚ØªØ©
financial_cache.set('balance', balance_data, timeout=300, account_id=123)
cached_balance = financial_cache.get('balance', account_id=123)

# ÙƒØ§Ø´ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ø£Ø±ØµØ¯Ø©
cache_obj = AccountBalanceCache.objects.get(account=account)
cache_obj.refresh_balance(force=True)
```

### 2. Window Functions Ù„Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø£Ù…Ø«Ù„

```sql
-- Ø§Ù„Ø£Ø±ØµØ¯Ø© Ø§Ù„Ø¬Ø§Ø±ÙŠØ©
SELECT 
    account_id,
    date,
    SUM(debit - credit) OVER (
        PARTITION BY account_id 
        ORDER BY date 
        ROWS UNBOUNDED PRECEDING
    ) as running_balance
FROM journal_entry_lines
```

### 3. Ù„Ù‚Ø·Ø§Øª Ø§Ù„Ø£Ø±ØµØ¯Ø©

```python
# Ø¥Ù†Ø´Ø§Ø¡ Ù„Ù‚Ø·Ø© Ø´Ù‡Ø±ÙŠØ©
EnhancedBalanceService.create_balance_snapshot(
    account=account,
    snapshot_date=date(2025, 12, 31)
)

# Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù„Ù‚Ø·Ø© Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø±ØµÙŠØ¯
balance = service._get_historical_balance_optimized(
    account, date_from=None, date_to=date.today()
)
```

### 4. Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡

| Ø§Ù„Ø¹Ù…Ù„ÙŠØ© | Ù‚Ø¨Ù„ Ø§Ù„ØªØ­Ø³ÙŠÙ† | Ø¨Ø¹Ø¯ Ø§Ù„ØªØ­Ø³ÙŠÙ† | Ø§Ù„ØªØ­Ø³Ù† |
|---------|-------------|-------------|---------|
| Ø­Ø³Ø§Ø¨ Ø§Ù„Ø±ØµÙŠØ¯ | 2.5s | 0.8s | 68% |
| Ù…ÙŠØ²Ø§Ù† Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© | 15s | 3s | 80% |
| ØªÙ‚Ø±ÙŠØ± Ø´Ø§Ù…Ù„ | 45s | 12s | 73% |

---

## ğŸ› ï¸ Ø¯Ù„ÙŠÙ„ Ø§Ù„ØªØ·ÙˆÙŠØ±

### Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ¦Ø© Ø§Ù„ØªØ·ÙˆÙŠØ±ÙŠØ©

```bash
# Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¨ÙŠØ¦Ø© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
python -m venv venv
source venv/bin/activate  # Linux/Mac
venv\Scripts\activate     # Windows

# ØªØ«Ø¨ÙŠØª Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª
pip install -r requirements.txt

# Ø¥Ø¹Ø¯Ø§Ø¯ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
python manage.py migrate

# ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£ÙˆÙ„ÙŠØ©
python manage.py loaddata financial/fixtures/initial_data.json
```

### ØªØ´ØºÙŠÙ„ Ø§Ù„Ù†Ø¸Ø§Ù…

```bash
# ØªØ´ØºÙŠÙ„ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø­Ø§Ø³Ø¨ÙŠ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ
python setup_new_accounting.py

# ØªØ´ØºÙŠÙ„ Ù†Ø¸Ø§Ù… Ø§Ù„Ø£Ø±ØµØ¯Ø© Ø§Ù„Ù…Ø­Ø³Ù†  
python setup_enhanced_balance_system.py

# ØªØ´ØºÙŠÙ„ Ù†Ø¸Ø§Ù… ØªØ²Ø§Ù…Ù† Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª
python setup_payment_sync_system.py

# ØªØ´ØºÙŠÙ„ Ø§Ù„Ø®Ø§Ø¯Ù…
python manage.py runserver
```

### Ø¥Ø¶Ø§ÙØ© Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯

```python
from financial.models import ChartOfAccounts, AccountType

# Ø¥Ù†Ø´Ø§Ø¡ Ù†ÙˆØ¹ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯
account_type = AccountType.objects.create(
    code='6000',
    name='Ù…ØµØ±ÙˆÙØ§Øª ØªØ´ØºÙŠÙ„ÙŠØ©',
    category='expense',
    nature='debit'
)

# Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ ÙØ±Ø¹ÙŠ
account = ChartOfAccounts.objects.create(
    code='6001',
    name='Ù…ØµØ±ÙˆÙØ§Øª Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¡',
    account_type=account_type,
    parent=None,  # Ø­Ø³Ø§Ø¨ Ø±Ø¦ÙŠØ³ÙŠ
    is_leaf=True,
    is_active=True
)
```

### Ø¥Ù†Ø´Ø§Ø¡ Ù‚ÙŠØ¯ Ù…Ø­Ø§Ø³Ø¨ÙŠ

```python
from financial.services.journal_service import JournalEntryService

# Ù‚ÙŠØ¯ Ø¨Ø³ÙŠØ·
entry = JournalEntryService.create_simple_entry(
    debit_account='6001',      # Ù…ØµØ±ÙˆÙØ§Øª Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¡
    credit_account='1001',     # Ø§Ù„Ø®Ø²ÙŠÙ†Ø©
    amount=Decimal('500'),
    description='ÙØ§ØªÙˆØ±Ø© ÙƒÙ‡Ø±Ø¨Ø§Ø¡ Ø´Ù‡Ø± Ø¯ÙŠØ³Ù…Ø¨Ø±',
    date=date.today()
)

# ØªØ±Ø­ÙŠÙ„ Ø§Ù„Ù‚ÙŠØ¯
JournalEntryService.post_entry(entry)
```

### Ø¥Ø¶Ø§ÙØ© Ù‚Ø§Ø¹Ø¯Ø© ØªØ²Ø§Ù…Ù† Ø¬Ø¯ÙŠØ¯Ø©

```python
from financial.models.payment_sync import PaymentSyncRule

rule = PaymentSyncRule.objects.create(
    name='ØªØ²Ø§Ù…Ù† Ù…Ø¯ÙÙˆØ¹Ø§Øª Ø®Ø§ØµØ©',
    source_model='custom_payment',
    trigger_event='on_create',
    sync_to_journal_entry=True,
    conditions={'payment_method': 'bank_transfer'},
    is_active=True,
    priority=1
)
```

---

## ğŸ” Ø§Ø³ØªÙƒØ´Ø§Ù Ø§Ù„Ø£Ø®Ø·Ø§Ø¡

### Ù…Ø´Ø§ÙƒÙ„ Ø´Ø§Ø¦Ø¹Ø© ÙˆØ­Ù„ÙˆÙ„Ù‡Ø§

#### 1. Ù…ÙŠØ²Ø§Ù† Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© ØºÙŠØ± Ù…ØªÙˆØ§Ø²Ù†

```python
# Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù‚ÙŠÙˆØ¯ ØºÙŠØ± Ø§Ù„Ù…ØªÙˆØ§Ø²Ù†Ø©
from financial.services.balance_validation_service import AdvancedBalanceValidationService

validation_result = AdvancedBalanceValidationService.validate_trial_balance_integrity()

if not validation_result['is_balanced']:
    print(f"Ø§Ù„ÙØ±Ù‚: {validation_result['difference']}")
    print("Ø§Ù„Ù‚ÙŠÙˆØ¯ ØºÙŠØ± Ø§Ù„Ù…ØªÙˆØ§Ø²Ù†Ø©:", validation_result['unbalanced_entries'])
```

#### 2. ÙØ´Ù„ ØªØ²Ø§Ù…Ù† Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª

```python
# ÙØ­Øµ Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„ØªØ²Ø§Ù…Ù† Ø§Ù„ÙØ§Ø´Ù„Ø©
from financial.models.payment_sync import PaymentSyncOperation

failed_operations = PaymentSyncOperation.objects.filter(status='failed')

for operation in failed_operations:
    print(f"Ø§Ù„Ø¹Ù…Ù„ÙŠØ© {operation.operation_id}: {operation.error_message}")
    
    # Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©
    if operation.can_retry():
        operation.status = 'retry'
        operation.save()
```

#### 3. Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø£Ø¯Ø§Ø¡

```python
# ØªØ­Ù„ÙŠÙ„ Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª
from financial.services.performance_optimizer import PerformanceOptimizer

# ØªØ­Ø³ÙŠÙ† Ø§Ù„ÙÙ‡Ø§Ø±Ø³
PerformanceOptimizer.optimize_journal_entry_queries()

# ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…
performance_analysis = PerformanceOptimizer.analyze_query_performance(
    "SELECT * FROM financial_chartofaccounts WHERE is_active = true"
)
```

#### 4. Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„ÙƒØ§Ø´

```python
# Ù…Ø³Ø­ Ø§Ù„ÙƒØ§Ø´
from financial.services.redis_cache_service import financial_cache

financial_cache.clear_all_financial_cache()

# Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ÙƒØ§Ø´
stats = financial_cache.get_cache_stats()
print(f"Ù…Ø¹Ø¯Ù„ Ø§Ù„Ù†Ø¬Ø§Ø­: {stats['hit_rate']:.1f}%")
```

### Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…

```python
import logging

# ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø³Ø¬Ù„Ø§Øª Ø§Ù„ØªÙØµÙŠÙ„ÙŠØ©
logging.getLogger('financial').setLevel(logging.DEBUG)

# Ù…Ø±Ø§Ù‚Ø¨Ø© Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„ØªØ²Ø§Ù…Ù†
logger = logging.getLogger('financial.payment_sync')
logger.info("Ø¨Ø¯Ø¡ Ø¹Ù…Ù„ÙŠØ© ØªØ²Ø§Ù…Ù† Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª")
```

### Ø£Ø¯ÙˆØ§Øª Ø§Ù„ØªØ´Ø®ÙŠØµ

```bash
# ÙØ­Øµ Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù…
python manage.py shell -c "
from financial.services.balance_validation_service import AdvancedBalanceValidationService
report = AdvancedBalanceValidationService.generate_balance_health_report()
print(f'Ù†Ù‚Ø§Ø· Ø§Ù„ØµØ­Ø©: {report[\"health_score\"]}/100')
"

# Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡
python manage.py test financial.tests.test_performance_stress --verbosity=2
```

---

## ğŸ“ Ø§Ù„Ø¯Ø¹Ù… ÙˆØ§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©

### Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„
- **Ø§Ù„Ù…Ø·ÙˆØ±**: ÙØ±ÙŠÙ‚ ØªØ·ÙˆÙŠØ± Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø§Ù„ÙŠ
- **Ø§Ù„Ø¥ØµØ¯Ø§Ø±**: 1.0.0
- **Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«**: Ø¯ÙŠØ³Ù…Ø¨Ø± 2025

### Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ©
- [Ø¯Ù„ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…](user_guide.md)
- [API Documentation](api_docs.md)
- [Ø£Ù…Ø«Ù„Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚](examples/)
- [Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©](faq.md)

---

*Ù‡Ø°Ø§ Ø§Ù„ØªÙˆØ«ÙŠÙ‚ ÙŠØºØ·ÙŠ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØªÙ‚Ø¯Ù… Ø¨Ø¬Ù…ÙŠØ¹ Ù…ÙƒÙˆÙ†Ø§ØªÙ‡. Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø£ÙƒØ«Ø± ØªÙØµÙŠÙ„Ø§Ù‹ØŒ Ø±Ø§Ø¬Ø¹ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø±Ø¬Ø¹ÙŠØ© Ø§Ù„Ù…Ø±ÙÙ‚Ø©.*
