# ุฏููู Bridge Agent - ุฑุจุท ุงูุจุตูุฉ ุจุงูุณูุฑูุฑ

## ๐ฏ ุงูููููู

```
[ZKTeco Device] โโ [Bridge Agent] โโ [cPanel Server]
  (192.168.x.x)      (ุฌูุงุฒู ุงููุญูู)    (ุงูุฅูุชุฑูุช)
```

**ุงููููุฒุงุช:**
- โ ูุง ูุญุชุงุฌ Port Forwarding
- โ ุขูู 100% (ููุชุงุญ ุณุฑู)
- โ ูุนูู ูุน Dynamic IP
- โ ูุฒุงููุฉ ุชููุงุฆูุฉ ูู 5 ุฏูุงุฆู
- โ ููุชุดู IP ุงููุงูููุฉ ุชููุงุฆูุงู

---

## ๐ฆ ุงูุชุซุจูุช ุนูู ุฌูุงุฒู ุงููุญูู

### ุงูุฎุทูุฉ 1: ุชุซุจูุช Python

```bash
# ุญูู Python ูู:
https://www.python.org/downloads/

# ุชุฃูุฏ ูู ุชูุนูู "Add Python to PATH"
```

### ุงูุฎุทูุฉ 2: ุชุซุจูุช ุงูููุชุจุงุช

```bash
cd bridge_agent
install.bat
```

### ุงูุฎุทูุฉ 3: ุชุนุฏูู ุงูุฅุนุฏุงุฏุงุช

ุงูุชุญ `config.json`:

```json
{
    "device_ip": "192.168.1.100",
    "device_port": 4370,
    "server_url": "https://yoursite.com",
    "agent_code": "AGENT-001",
    "agent_secret": "your-secret-key-12345",
    "sync_interval": 5,
    "auto_discover_ip": true
}
```

**ููุงุญุธุงุช:**
- `device_ip`: ุถุน IP ุงููุงูููุฉ (ุฃู ุงุชุฑูู ูููุชุดูู ุชููุงุฆูุงู)
- `server_url`: ุฑุงุจุท ูููุนู ุนูู cPanel
- `agent_code`: ููุฏ ูุฑูุฏ (ููุณ ุงูููุฏ ูู ุงูุณูุฑูุฑ)
- `agent_secret`: ููุชุงุญ ุณุฑู (ููุณ ุงูููุชุงุญ ูู ุงูุณูุฑูุฑ)

---

## โ๏ธ ุงูุฅุนุฏุงุฏุงุช ุนูู ุงูุณูุฑูุฑ (cPanel)

### 1. ูู `settings.py`:

```python
BRIDGE_AGENTS = {
    'AGENT-001': 'your-secret-key-12345',
}
```

### 2. ุฃุถู ุงููุงูููุฉ ูู ุงููุธุงู:

```
ุงูููุงุฑุฏ ุงูุจุดุฑูุฉ โ ูุงูููุงุช ุงูุจุตูุฉ โ ุฅุถุงูุฉ ูุงูููุฉ

- ุงุณู ุงููุงูููุฉ: ุงูุจุตูุฉ ุงูุฑุฆูุณูุฉ
- ููุฏ ุงููุงูููุฉ: AGENT-001  โ ููุณ ุงูููุฏ ูู config.json
- ููุน ุงููุงูููุฉ: ุจุตูุฉ ุงูุฅุตุจุน
- IP: 192.168.1.100 (ูููุนูููุงุช ููุท)
```

---

## ๐ ุงูุชุดุบูู

### ุชุดุบูู ุนุงุฏู:

```bash
run.bat
```

### ุชุดุบูู ูู Windows Service (ูุนูู ุฏุงุฆูุงู):

```bash
# ูู Administrator
install_service.bat

# ุงูุชุญูู:
nssm start BiometricBridge
nssm stop BiometricBridge
nssm restart BiometricBridge
```

---

## ๐ ููู ูุนููุ

```
1. Bridge Agent ูุชุตู ุจุงููุงูููุฉ ูู 5 ุฏูุงุฆู
2. ูุฌูุจ ุงูุณุฌูุงุช ุงูุฌุฏูุฏุฉ
3. ูุฑุณููุง ููุณูุฑูุฑ ุนุจุฑ HTTPS
4. ุงูุณูุฑูุฑ ูุชุญูู ูู ุงูููุฏ ูุงูููุชุงุญ
5. ูุญูุธ ุงูุณุฌูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
6. ูุฑุจุทูุง ุจุงูููุธููู ุชููุงุฆูุงู
```

---

## ๐ ุงูุฃูุงู

### ุงูุชุญูู ูู ุงููููุฉ:

```python
# ูู ุทูุจ ูุญุชูู ุนูู:
Authorization: Bearer your-secret-key-12345
agent_code: AGENT-001

# ุงูุณูุฑูุฑ ูุชุญูู ูู:
1. ุงูููุชุงุญ ุงูุณุฑู ุตุญูุญ
2. ุงูููุฏ ูุณุฌู ูู ุงููุธุงู
3. ุงููุงูููุฉ ููุฌูุฏุฉ
```

### ูุตุงุฆุญ ุงูุฃูุงู:

- โ ุงุณุชุฎุฏู ููุชุงุญ ุณุฑู ููู (32 ุญุฑู ุนูู ุงูุฃูู)
- โ ุบูุฑ ุงูููุชุงุญ ุฏูุฑูุงู
- โ ูุง ุชุดุงุฑู ุงูููุชุงุญ ูุน ุฃุญุฏ
- โ ุงุณุชุฎุฏู HTTPS ููุท

---

## ๐ ุงูุณุฌูุงุช (Logs)

```
bridge_agent.log

2025-01-03 06:00:00 - INFO - Bridge Agent Started
2025-01-03 06:00:01 - INFO - Testing connection to 192.168.1.100:4370
2025-01-03 06:00:02 - INFO - โ Connected successfully!
2025-01-03 06:00:02 - INFO - Fetched 15 records from device
2025-01-03 06:00:03 - INFO - Sending 15 records to server...
2025-01-03 06:00:04 - INFO - โ Server response: Processed 15 records
```

---

## ๐๏ธ ุญู ุงููุดุงูู

### ุงููุดููุฉ: ูุง ูุฌุฏ ุงููุงูููุฉ

```bash
# ุงูุญู 1: ุชูุนูู Auto Discovery
"auto_discover_ip": true

# ุงูุญู 2: ุชุญุฏูุฏ IP ูุฏููุงู
"device_ip": "192.168.1.100"

# ุงูุญู 3: ุงูุจุญุซ ูุฏููุงู
ping 192.168.1.100
```

### ุงููุดููุฉ: ุฎุทุฃ ูู ุงูุงุชุตุงู ุจุงูุณูุฑูุฑ

```bash
# ุชุญูู ูู:
1. ุงูุฅูุชุฑูุช ูุนูู
2. ุฑุงุจุท ุงูุณูุฑูุฑ ุตุญูุญ
3. ุงูููุชุงุญ ุงูุณุฑู ุตุญูุญ
4. ุงูููุฏ ูุณุฌู ูู ุงูุณูุฑูุฑ
```

### ุงููุดููุฉ: ุงูุณุฌูุงุช ูุง ุชุธูุฑ

```bash
# ุชุญูู ูู:
1. ุงููุงูููุฉ ูุถุงูุฉ ุจููุณ ุงูููุฏ
2. ุฑูู ุงูููุธู ูู ุงููุธุงู = user_id ูู ุงููุงูููุฉ
```

---

## ๐ฑ ุงููุฑุงูุจุฉ

### ุนูู ุงูุณูุฑูุฑ:

```
ุงูููุงุฑุฏ ุงูุจุดุฑูุฉ โ ูุงูููุงุช ุงูุจุตูุฉ โ [ุงุณู ุงููุงูููุฉ]

- ุขุฎุฑ ุงุชุตุงู: ููุฐ ุฏูููุชูู
- ุงูุญุงูุฉ: ูุดุท โ ูุชุตู
- ุงูุณุฌูุงุช: 1,234
```

### ุนูู ุงูุฌูุงุฒ ุงููุญูู:

```bash
# ุดุงูุฏ ุงูุณุฌูุงุช ูุจุงุดุฑุฉ
type bridge_agent.log
```

---

## ๐ ุงูุชุญุฏูุซ

```bash
# 1. ุฃููู ุงูู Service
nssm stop BiometricBridge

# 2. ุญุฏุซ ุงููููุงุช
git pull
# ุฃู ุงูุณุฎ ุงููููุงุช ุงูุฌุฏูุฏุฉ

# 3. ุดุบู ูู ุฌุฏูุฏ
nssm start BiometricBridge
```

---

## ๐ก ูุตุงุฆุญ

1. **ุงุฌุนู ุงูุฌูุงุฒ ูุนูู ุฏุงุฆูุงู:**
   - ุงุณุชุฎุฏู Windows Service
   - ุนุทู Sleep Mode
   - ูุนู Auto-start

2. **ุฑุงูุจ ุงูุณุฌูุงุช:**
   - ุงูุชุญ `bridge_agent.log` ููููุงู
   - ุชุฃูุฏ ูู ูุฌุงุญ ุงููุฒุงููุฉ

3. **ุงููุณุฎ ุงูุงุญุชูุงุทู:**
   - ุงุญูุธ `config.json` ูู ููุงู ุขูู
   - ุณุฌู ุงูููุชุงุญ ุงูุณุฑู

---

## ๐ ุงูุฏุนู

ุฅุฐุง ูุงุฌูุช ูุดููุฉ:

1. ุงูุชุญ `bridge_agent.log`
2. ุงุจุญุซ ุนู ุฑุณุงูุฉ ุงูุฎุทุฃ
3. ุชุญูู ูู ุงูุฅุนุฏุงุฏุงุช
4. ุฌุฑุจ ุฅุนุงุฏุฉ ุงูุชุดุบูู

---

## โ Checklist

ูุจู ุงูุชุดุบูู:

- [ ] Python ูุซุจุช
- [ ] ุงูููุชุจุงุช ูุซุจุชุฉ (`install.bat`)
- [ ] `config.json` ูุนุฏู ุจุงูุฅุนุฏุงุฏุงุช ุงูุตุญูุญุฉ
- [ ] ุงูููุชุงุญ ุงูุณุฑู ูู `settings.py`
- [ ] ุงููุงูููุฉ ูุถุงูุฉ ุจููุณ ุงูููุฏ
- [ ] ุงูุฅูุชุฑูุช ูุนูู
- [ ] ุงููุงูููุฉ ูุชุตูุฉ ุจุงูุดุจูุฉ

ุฌุงูุฒ! ๐
